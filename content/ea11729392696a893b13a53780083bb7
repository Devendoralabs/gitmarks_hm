<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="Crowbar,Crowbar Todos,Crowbar Web Service,Piggy Bank,Semantic Bank,Solvent,Glossary definition:= Crowbar is a web scraping environment based on the use of a server-side headless mozilla-based browser.,Juanan,RyanLee,Stefano" />
<link rel="shortcut icon" href="/favicon.ico" />
<link title="Creative Commons" type="application/rdf+xml" href="/mediawiki/index.php?title=Crowbar&amp;action=creativecommons" rel="meta" />
<link title="Dublin Core" type="application/rdf+xml" href="/mediawiki/index.php?title=Crowbar&amp;action=dublincore" rel="alternate meta" />
<link rel="copyright" href="http://creativecommons.org/licenses/by/2.5/" />
    <title>Crowbar - SIMILE</title>
    <style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/mediawiki/skins/simile/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="/mediawiki/skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "/mediawiki/skins/simile/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "/mediawiki/skins/simile/IE55Fixes.css";</style><![endif]-->
    <!--[if gte IE 6]><style type="text/css">@import "/mediawiki/skins/simile/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="/mediawiki/skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="/mediawiki/index.php?title=-&amp;action=raw&amp;gen=js"></script>    <script type="text/javascript" src="/mediawiki/skins/common/wikibits.js"></script>
    <style type="text/css">/*<![CDATA[*/
@import "/mediawiki/index.php?title=MediaWiki:Common.css&action=raw&ctype=text/css&smaxage=18000";
@import "/mediawiki/index.php?title=MediaWiki:Simile.css&action=raw&ctype=text/css&smaxage=18000";
@import "/mediawiki/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>                  </head>
  <body                 class="ns-0">

        <script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>

      <div id="header">
       <table>
        <tr>
         <td id="path"><a href="/">Home</a> &raquo <a href="/wiki/">Wiki</a></td>
         <td id="actions">
          <ul>
                              <li id="pt-login">
                    <a href="/mediawiki/index.php?title=Special:Userlogin&amp;returnto=Crowbar"
                                            >
                      Log in / create account                    </a>
                  </li>
                      </ul>         
         </td>
        </tr>
       </table>
      </div>

    <table id="frame">
     <tr>
      <td id="contentColumn">
      
      
      <ul id="tabs">                  <li id="ca-nstab-main" 
                            class="selected"
            >
              <a href="/wiki/Crowbar">Article</a>
          </li>
                  <li id="ca-talk" 
            >
              <a href="/wiki/Talk:Crowbar">Discussion</a>
          </li>
                  <li id="ca-edit" 
            >
              <a href="/mediawiki/index.php?title=Crowbar&amp;action=edit">Edit</a>
          </li>
                  <li id="ca-history" 
            >
              <a href="/mediawiki/index.php?title=Crowbar&amp;action=history">History</a>
          </li>
              </ul>
      
       <div id="content">
                        <div id="title">Crowbar</div>
<table style="width: 100%; margin: 0em 0em 0.7em 0em; border: 1px solid #ccc">
<tr>
<td style="width: 100%; vertical-align: middle; font-size: 120%"><div style="margin: 1em;"><a href="/mediawiki/index.php?title=Glossary_definition:%3D_Crowbar_is_a_web_scraping_environment_based_on_the_use_of_a_server-side_headless_mozilla-based_browser.&amp;action=edit" class="new" title="Glossary definition:= Crowbar is a web scraping environment based on the use of a server-side headless mozilla-based browser.">glossary definition:=  Crowbar is a web scraping environment based on the use of a server-side headless mozilla-based browser.</a></div>
<div style="margin: 1em;">Its purpose is to allow running javascript scrapers against a DOM to automate web sites scraping but avoiding all the syntax normalization issues.</div>
</td><td style="vertical-align: middle;"><a href="/wiki/Image:Crowbar_logo.jpg" class="image" title="Image:crowbar_logo.jpg"><img src="/mediawiki/images/4/4c/Crowbar_logo.jpg" alt="Image:crowbar_logo.jpg" width="198" height="142" longdesc="/wiki/Image:Crowbar_logo.jpg" /></a>
</td></tr></table>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/mediawiki/index.php?title=Crowbar&amp;action=edit&amp;section=1" title="Edit section: Requirements">edit</a>]</div><a name="Requirements"></a><h2>Requirements</h2>
<p>Crowbar wants to be able to run the same exact scrapers created by <a href="/wiki/Solvent" title="Solvent">Solvent</a> for the use in <a href="/wiki/Piggy_Bank" title="Piggy Bank">Piggy Bank</a>, to avoid having to tweak and tune the scrapers due to implementation differences between parsers and DOM/XPath implementations.
</p><p>For this reason, it needs to work inside an environment that is as close as possible to a browser. Luckily, Mozilla provides <a href="http://developer.mozilla.org/en/docs/XULRunner" class="external text" title="http://developer.mozilla.org/en/docs/XULRunner" rel="nofollow">XULRunner</a>: a firefox-like execution environment.
</p><p>You need to have XULRunner (version 1.8.1 or higher) in order for Crowbar to work on your system.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/mediawiki/index.php?title=Crowbar&amp;action=edit&amp;section=2" title="Edit section: Where do I get it?">edit</a>]</div><a name="Where_do_I_get_it.3F"></a><h2>Where do I get it?</h2>
<p>Crowbar is currently work in progress and has not been released yet. You can try it out by downloading it directly using a Subversion client from its subversion repository at
</p>
<pre>http://simile.mit.edu/repository/crowbar/trunk/</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/mediawiki/index.php?title=Crowbar&amp;action=edit&amp;section=3" title="Edit section: Design">edit</a>]</div><a name="Design"></a><h2>Design</h2>
<p>Crowbar is implemented as a (rather simple, in fact) XULRunner application that provides an HTTP RESTful web service implemented in javascript (basically turning a web browser into a web server!) that you can use to 'remotely control' the browser.  
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/mediawiki/index.php?title=Crowbar&amp;action=edit&amp;section=4" title="Edit section: How to Run Crowbar">edit</a>]</div><a name="How_to_Run_Crowbar"></a><h2>How to Run Crowbar</h2>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/mediawiki/index.php?title=Crowbar&amp;action=edit&amp;section=5" title="Edit section: Windows">edit</a>]</div><a name="Windows"></a><h3>Windows</h3>
<p>After you have installed XULRunner, open up the command prompt and type:
</p>
<pre>c:\&gt; %XULRUNNER_HOME%\xulrunner.exe --install-app %CROWBAR%\xulapp
c:\&gt; cd %CROWBAR%\xulapp
c:\&gt; %XULRUNNER_HOME%\xulrunner.exe application.ini</pre>
<p>where <code>%XULRUNNER_HOME%</code> is the path where you have installed XULRunner and <code>%CROWBAR%</code> is the folder where crowbar resides and <code>c:\&gt;</code> is the prompt (meaning that you don't have to type that, it's just an indicate that these are different lines).
</p><p>If all is successful, a small window named "Crowbar" will pop up.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/mediawiki/index.php?title=Crowbar&amp;action=edit&amp;section=6" title="Edit section: Linux">edit</a>]</div><a name="Linux"></a><h3>Linux</h3>
<p>After you have installed XULRunner, open your favorite shell and type:
</p>
<pre>$ $XULRUNNER_HOME/xulrunner --install-app $CROWBAR/xulapp
$ cd $CROWBAR/xulapp
$ $XULRUNNER_HOME/xulrunner application.ini</pre>
<p>where <code>$XULRUNNER_HOME</code> is the path where you have installed XULRunner and <code>$CROWBAR</code> is the folder where crowbar resides and <code>$</code> is the command prompt (you don't have to type that, it's just an indicate that these are different lines).
</p><p>If all is successful, a small window named "Crowbar" will pop up.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/mediawiki/index.php?title=Crowbar&amp;action=edit&amp;section=7" title="Edit section: MacOSX">edit</a>]</div><a name="MacOSX"></a><h3>MacOSX</h3>
<p>After you have installed XULRunner, open the Terminal and type:
</p>
<pre>$ /Library/Frameworks/XUL.framework/xulrunner-bin --install-app $CROWBAR/xulapp
$ /Applications/Crowbar.app/Contents/MacOS/xulrunner</pre>
<p><code>$CROWBAR</code> is the folder where crowbar resides and <code>$</code> is the shell prompt (so you don't have to type that, it's just an indicate that these are different lines).
</p><p>If all is successful, a small window named "Crowbar" will pop up.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/mediawiki/index.php?title=Crowbar&amp;action=edit&amp;section=8" title="Edit section: Now what?">edit</a>]</div><a name="Now_what.3F"></a><h2>Now what?</h2>
<p>When Crowbar is running, it shows a small window that contains the address that is currently loading or has been loaded last. The real value of Crowbar is offered as a RESTful web service listening by default on port 10000.
</p><p>You can use crowbar by simply pointing any other web browser to
</p>
<pre>http://127.0.0.1:10000/</pre>
<p>Crowbar will reply with a web page that you can use to indicate what URL you want Crowbar to fetch, execute and serialize back at you.
</p><p>You can also use command line HTTP clients such as <code>curl</code> or <code>wget</code> to interact with the web service. For example, 
</p>
<pre>curl -s --data &quot;url=http://simile.mit.edu/&amp;delay=1000&quot; http://127.0.0.1:10000/</pre>
<p>will return the serialized DOM of the <a href="http://simile.mit.edu/" class="external free" title="http://simile.mit.edu/" rel="nofollow">http://simile.mit.edu/</a> page at STDOUT after having waited for 1 second for the page to be fetched, loaded, parsed and made available to Crowbar by the underlying XulRunner.
</p><p>To scrape data,
</p>
<pre>curl -s --data &quot;url=http://simile.mit.edu/&amp;delay=1000&amp;mode=scrape&amp;scraper=
http://simile.mit.edu/repository/piggy-bank/trunk/src/extension/chrome/content/scrapers/generic-page-scraper.js&quot; 
http://127.0.0.1:10000/</pre>
<p>which will load the SIMILE page, then load and run the scraper as specified, returning RDF/XML of the scraped data to STDOUT.
</p><p>For more information on what you can do with Crowbar, read the <a href="/wiki/Crowbar_Web_Service" title="Crowbar Web Service">Crowbar web service</a> description.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/mediawiki/index.php?title=Crowbar&amp;action=edit&amp;section=9" title="Edit section: Results">edit</a>]</div><a name="Results"></a><h3> Results </h3>
<p>You can upload your results to a <a href="/wiki/Semantic_Bank" title="Semantic Bank">Semantic Bank</a> with <a href="http://simile.mit.edu/repository/atm/trunk/atm.py" class="external text" title="http://simile.mit.edu/repository/atm/trunk/atm.py" rel="nofollow">ATM</a>, a command-line RDF/XML uploading script in Python:
</p>
<pre>% ./atm.py -b http://simile.mit.edu/bank/ -u yourusername output.rdf</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/mediawiki/index.php?title=Crowbar&amp;action=edit&amp;section=10" title="Edit section: What functionality is planned?">edit</a>]</div><a name="What_functionality_is_planned.3F"></a><h2>What functionality is planned?</h2>
<p>See the <a href="/wiki/Crowbar_Todos" title="Crowbar Todos">Crowbar Todos</a> list.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/mediawiki/index.php?title=Crowbar&amp;action=edit&amp;section=11" title="Edit section: There are tons of scraping solutions, why another one?">edit</a>]</div><a name="There_are_tons_of_scraping_solutions.2C_why_another_one.3F"></a><h2>There are tons of scraping solutions, why another one?</h2>
<p>Most scraping solutions work on the so-called 'syntax space' (that is, extracting information out of the raw stream of data served as an HTTP response) and for that reason they have to cope with all the ways the same data can be serialized but result in the same visual web page in a browser. While these solutions are easy to write, they tend to require a lot of maintenance over time just to cope with syntax-space changes that have no influence on the overall outcome of the page rendering for the users (and therefore is something that the page creators are prone to change without worry). It is common, in fact, for these solutions to require constant tweaking.
</p><p>Scraping on 'model space' is a better solution because it allows the scraper to work directly on the 'infoset' that contains the data and that is used by the browser to render the page to the user. This means, to be very least, working on the data model that comes out of an HTML parser and then operate on the resulting DOM using DOM-aware query mechanisms (such as, for example, XPath).
</p><p><a href="/wiki/Solvent" title="Solvent">Solvent</a> and <a href="/wiki/Piggy_Bank" title="Piggy Bank">Piggy Bank</a> show how much easier, natural and solid it is to write scrapers against a DOM rather than against an array of characters (which is, the serialized DOM representation in HTML). Crowbar wants to enable the automation of that those scraping processes, reusing the exact same scrapers that work for Piggy Bank and are created in Solvent.
</p><p>Unfortunately, as HTML in the real world varies very much, writing an HTML parser and DOM producer that can cope with real-world variety of HTML is no easy task. For this reason, Crowbar is based upon the very same browsing code that is used by Firefox to parse the HTML and create the resulting DOM.
</p><p>An added benefit of working with a full browsing environment as your crawler's agent is that we can access the DOM after the "onload" javascript hooks were executed, which means that we can scrape content that was not even in the HTML page served by the web server originally and that was client-side included via AJAX or programmatically computed after the page was loaded.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/mediawiki/index.php?title=Crowbar&amp;action=edit&amp;section=12" title="Edit section: Licensing and legal issues">edit</a>]</div><a name="Licensing_and_legal_issues"></a><h2>Licensing and legal issues</h2>
<p>Crowbar is open source software and is licensed under the <a href="http://simile.mit.edu/license.html" class="external text" title="http://simile.mit.edu/license.html" rel="nofollow">BSD license</a>.
</p><p>Portions of Crowbar are re-used from <a href="http://www.w3.org/2005/ajar/tab" class="external text" title="http://www.w3.org/2005/ajar/tab" rel="nofollow">Tabulator</a>, available under the <a href="http://www.w3.org/Consortium/Legal/2002/copyright-software-20021231" class="external text" title="http://www.w3.org/Consortium/Legal/2002/copyright-software-20021231" rel="nofollow">W3C Software License</a>.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/mediawiki/index.php?title=Crowbar&amp;action=edit&amp;section=13" title="Edit section: Contributing">edit</a>]</div><a name="Contributing"></a><h2>Contributing</h2>
<p>Crowbar is an <a href="http://www.opensource.org/" class="external text" title="http://www.opensource.org/" rel="nofollow">open source</a> software and built around the spirit of open participation and collaboration. There are several ways you can help:
</p>
<ul><li> Blog about Crowbar
</li><li> Edit, fix or otherwise contribute content on the wiki 
</li><li> Subscribe to our <a href="http://simile.mit.edu/mail.html" class="external text" title="http://simile.mit.edu/mail.html" rel="nofollow">mailing lists</a> to show your interest and give us feedback
</li><li> Report problems and ask for new features through our <a href="http://simile.mit.edu/issues/browse/CROWBAR" class="external text" title="http://simile.mit.edu/issues/browse/CROWBAR" rel="nofollow">issue tracking system</a> (but take a look at our <a href="/wiki/Crowbar_Todos" title="Crowbar Todos">todo list</a> first)
</li><li> <a href="http://simile.mit.edu/contribute.html" class="external text" title="http://simile.mit.edu/contribute.html" rel="nofollow">Send us patches or fixes</a> to the code
</li></ul>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/mediawiki/index.php?title=Crowbar&amp;action=edit&amp;section=14" title="Edit section: Credits">edit</a>]</div><a name="Credits"></a><h2>Credits</h2>
<p>This software was created by the SIMILE project and in particular:
</p>
<ul><li><a href="/wiki/User:Stefano" title="User:Stefano">Stefano Mazzocchi</a> (original author)
</li><li><a href="/wiki/User:RyanLee" title="User:RyanLee">Ryan Lee</a>
</li><li><a href="/wiki/User:Juanan" title="User:Juanan">Juanan Pereira</a>
</li></ul>

<!-- Saved in parser cache with key simile_publicwiki:pcache:idhash:1974-0!1!0!0!!en!2 and timestamp 20101219171520 -->
<div class="printfooter">
Retrieved from "<a href="http://simile.mit.edu/wiki/Crowbar">http://simile.mit.edu/wiki/Crowbar</a>"</div>
        <div id="catlinks"><p class='catlinks'><a href="/mediawiki/index.php?title=Special:Categories&amp;article=Crowbar" title="Special:Categories">Categories</a>: <span dir='ltr'><a href="/wiki/Category:Project" title="Category:Project">Project</a></span> | <span dir='ltr'><a href="/wiki/Category:Crowbar" title="Category:Crowbar">Crowbar</a></span></p></div>       </div>
      </td>
      <td id="sidebarColumn">
       <div id="sidebar">
        <div class="logo">         <a href="http://simile.mit.edu/" title="The SIMILE Project">          <img alt="Simile" src="http://simile.mit.edu/images/logo.png"/>         </a>        </div>
        
        <div id="search">
            <form name="searchform" action="/wiki/Special:Search" id="searchform">
              <input id="searchInput" name="search" type="text"
                accesskey="f"                 value=""              /><input type='submit' name="fulltext" class="searchButton" value="Search" />
            </form>
        </div>

                  <div id="p-navigation" class="portlet">
            <h2>Navigation</h2>
            <div class='pBody'>
              <ul>
                              <li id="n-mainpage"><a href="/wiki/Main_Page">Main Page</a></li>
                               <li id="n-recentchanges"><a href="/wiki/Special:Recentchanges">Recent changes</a></li>
                               <li id="n-help"><a href="/wiki/Help:Contents">Help</a></li>
                             </ul>
            </div>
          </div>
        
        <div id="p-tb" class="portlet">
          <h2>Toolbox</h2>
          <div class="pBody">
            <ul>
                                                    <li id="t-whatlinkshere">
                      <a href="/mediawiki/index.php?title=Special:Whatlinkshere&amp;target=Crowbar">
                        What links here                      </a>
                    </li>
                                      <li id="t-recentchangeslinked">
                      <a href="/mediawiki/index.php?title=Special:Recentchangeslinked&amp;target=Crowbar">
                        Related changes                      </a>
                    </li>
                                                                                                                                                                        <li id="t-upload">
                    <a href="/wiki/Special:Upload">
                      Upload file                    </a>
                  </li>
                                                                <li id="t-specialpages">
                    <a href="/wiki/Special:Specialpages">
                      Special pages                    </a>
                  </li>
                                                            <li id="t-print">
                  <a href="/mediawiki/index.php?title=Crowbar&amp;printable=yes">
                    Printable version                  </a>
                </li>
                          </ul>
          </div>
        </div>

              </div>
     </td>
    </tr>
   </table>

  <div id="footer">
   <table>
    <tr>
     <td>
        This page was last modified 15:04, 22 March 2008.        ~ This page has been accessed 55,754 times.            </td>
     <td rowspan="2">
      <a href="http://creativecommons.org/licenses/by/2.5/"><img src="http://creativecommons.org/images/public/somerights20.png" alt='Attribution 2.5' /></a>      <a href="http://www.mediawiki.org/"><img src="/mediawiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="MediaWiki" /></a>     </td>
    </tr>
    <tr>
     <td>
      <div class="copyright">Copyright &copy; 2003-2008 <a href="http://www.mit.edu/">Massachusetts Institute of Technology</a></div>
     </td>
    </tr>
   </table>
  </div>
  
  <!-- Served by libaxis29.mit.edu in 0.121 secs. -->     
  </body>
</html>

