<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- Use this code block to activate a prestitial if there's one to load -->
<!-- BEGIN ADVERTPRO ADVANCED CODE BLOCK -->

<SCRIPT language="JavaScript" type="text/javascript">
<!--
document.write('<SCR'+'IPT src="http://avpa.dzone.com/servlet/view/dynamic/javascript/zone?zid=159&pid=0&random='+Math.floor(89999999*Math.random()+10000000)+'&millis='+new Date().getTime()+'" language="JavaScript" type="text/javascript"></SCR'+'IPT>');
//-->
</SCRIPT>

<!-- END ADVERTPRO ADVANCED CODE BLOCK -->
<title>Slope-one Recommender - Exclusive Article from Mahout in Action | Book Zone</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="alternate" type="application/rss+xml" title="Comments for &quot;Slope-one Recommender - Exclusive Article from Mahout in Action&quot;" href="/crss/node/21417" />

<link rel="shortcut icon" href="/misc/favicon.ico" type="image/x-icon" />
	<link rel="alternate" type="application/rss+xml" title="Book Zone RSS" href="http://feeds.dzone.com/zones/books" />
	<link type="text/css" rel="stylesheet" media="all" href="http://cdn.dzone.com/sites/all/files/css/css_a1b3211a187ff45730d956127b77708c.css" />
<link type="text/css" rel="stylesheet" media="print" href="http://cdn.dzone.com/sites/all/files/css/css_4050910e305418353c70d479dbbedb5a.css" />
			<META NAME="Description" CONTENT="This article is taken from Mahout in Action by Sean Owen, Robin Anil, Ted Dunning, and Ellen Friedman. The authors discuss the slope-one recommender approach...">
	
    </head>
<body class="sidebar-right">

<div id="header-region" class="clear-block"></div>

<div id="wrapper" class="fewerAds">
<div id="container" class="clear-block">
	<div id="header">
		<div id="masthead">
			<div class="join">
			  								<img src="http://cdn.dzone.com//sites/all/themes/dzone/images/avatars/default_64.gif" class="mh_avatar"/>
				<a href="/user" title="Login">Login</a><br/>
								<a href="/user/register" title="Join DZone">Join DZone</a>
											</div>
			<div id="site_id">
				<a href="http://www.dzone.com" title="DZone: Your Personal Tech Universe"><img class="dz_logo"
					 src="/sites/all/themes/dzone/images/mh_dzone_logo.gif"
					 alt="DZone: Your Personal Tech Universe" title="DZone: Your Personal Tech Universe" /></a>
				<a href="/" title="Book Zone"><img class="site_logo" src="/sites/all/themes/dzone/images/mh_logo_itbooks.gif"
					 alt="Book Zone" title="Book Zone" /></a>
				<span class="site_slogan">Book news and reviews for Developers & IT Pros</span>
			</div>
			<div class="global_menu">
								<ul class="nice-menu nice-menu-down" id="nice-menu-1"><li id="menu-211" class="menu-path-front"><a href="/">Home</a></li>
<li id="menu-125" class="menuparent menu-path-domain"><a href="/domain">Zones</a><ul><li id="menu-295" class="menu-path-domain-dotnet.dzone.com"><a href="/domain/dotnet.dzone.com">.NET Zone</a></li>
<li id="menu-358" class="menu-path-domain-agile.dzone.com"><a href="/domain/agile.dzone.com" title="Go to agile.dzone.com">Agile Zone</a></li>
<li id="menu-189" class="menu-path-domain-architects.dzone.com"><a href="/domain/architects.dzone.com" title="Go to architects.dzone.com">Architects Zone</a></li>
<li id="menu-400" class="menu-path-domain-books.dzone.com"><a href="/domain/books.dzone.com" title="Go to books.dzone.com">Book Zone</a></li>
<li id="menu-3197" class="menu-path-domain-reach.dzone.com"><a href="/domain/reach.dzone.com" title="Go to reach.dzone.com">DZone Reach</a></li>
<li id="menu-413" class="menu-path-domain-eclipse.dzone.com"><a href="/domain/eclipse.dzone.com" title="Go to eclipse.dzone.com">Eclipse Zone</a></li>
<li id="menu-416" class="menu-path-domain-groovy.dzone.com"><a href="/domain/groovy.dzone.com" title="Go to groovy.dzone.com">Groovy Zone</a></li>
<li id="menu-426" class="menu-path-domain-java.dzone.com"><a href="/domain/java.dzone.com" title="Go to java.dzone.com">Javalobby</a></li>
<li id="menu-317" class="menu-path-domain-jetbrains.dzone.com"><a href="/domain/jetbrains.dzone.com" title="Go to jetbrains.dzone.com">JetBrains Zone</a></li>
<li id="menu-4849" class="menu-path-domain-mobile.dzone.com"><a href="/domain/mobile.dzone.com" title="Go to mobile.dzone.com">Mobile Dev Zone</a></li>
<li id="menu-431" class="menu-path-domain-netbeans.dzone.com"><a href="/domain/netbeans.dzone.com" title="Go to netbeans.dzone.com">NetBeans Zone</a></li>
<li id="menu-314" class="menu-path-domain-soa.dzone.com"><a href="/domain/soa.dzone.com" title="Go to soa.dzone.com">SOA Zone</a></li>
<li id="menu-287" class="menu-path-domain-server.dzone.com"><a href="/domain/server.dzone.com">Server Zone</a></li>
<li id="menu-454" class="menu-path-domain-css.dzone.com"><a href="/domain/css.dzone.com" title="Go to css.dzone.com">Web Builder Zone</a></li>
</ul>
</li>
<li id="menu-367" class="menu-path-library.dzone.com"><a href="http://library.dzone.com">Library</a></li>
<li id="menu-167" class="menu-path-refcardz.dzone.com-"><a href="http://refcardz.dzone.com/">Refcardz</a></li>
<li id="menu-169" class="menu-path-forums.dzone.com"><a href="http://forums.dzone.com">Forums</a></li>
<li id="menu-215" class="menu-path-www.dzone.com-links"><a href="http://www.dzone.com/links">Links</a></li>
<li id="menu-4753" class="menu-path-itquestions.com"><a href="http://itquestions.com" title="">ITQuestions</a></li>
<li id="menu-1349" class="menu-path-snippets.dzone.com"><a href="http://snippets.dzone.com" title="">Snippets</a></li>
<li id="menu-4893" class="menu-path-www.dzone.com-contribute"><a href="http://www.dzone.com/contribute" title="">Contribute</a></li>
</ul>
			</div>
			                <div class="mh_leader">
                <div class="leaderboard">
                <!-- BEGIN ADVERTPRO ADVANCED CODE BLOCK -->
                  <SCRIPT language="JavaScript" type="text/javascript">
                <!--
                document.write('<SCR'+'IPT src="http://avpa.dzone.com/servlet/view/banner/javascript/zone?zid=107&keywords=books.dzone.com&pid=0&random='+Math.floor(89999999*Math.random()+10000000)+'&millis='+new Date().getTime()+'" language="JavaScript" type="text/javascript"></SCR'+'IPT>');
                //-->
                </SCRIPT>
                  <NOSCRIPT>
                  <A href="http://avpa.dzone.com/servlet/click/zone?zid=107&pid=0&lookup=true&position=1" target="_top"> <IMG src="http://avpa.dzone.com/servlet/view/banner/image/zone?zid=107&pid=0&position=1" height="90" width="728" hspace="0" vspace="0" border="0" alt="Click Here!"> </A>
                  </NOSCRIPT>
                  <!-- END ADVERTPRO ADVANCED CODE BLOCK -->
                </div>
                </div>
            		
		</div>
	</div>
	<!-- end of header -->
	<div id="center"><div id="squeeze">
		<div id="article"> <div class="breadcrumb"><a href="/">Home</a></div>						 
						<div id="articleHead">
		   <div id="dzone_vote_widget" style="float: left; margin-right: 8px;">
		   <script type="text/javascript">var dzone_title = 'Slope-one Recommender - Exclusive Article from Mahout in Action';</script>
			 		   <script type="text/javascript">var dzone_url = 'http://books.dzone.com/articles/slope-one-recommender';</script>
		   <script language="javascript" src="http://widgets.dzone.com/widgets/zoneit.js"></script></div>		   <h1>Slope-one Recommender - Exclusive Article from Mahout in Action</h1>
														</div>
							
			<div id="articleText">
						
						<div id="node-21417" class="node node-page node-article" >


  <div class="meta"> 
    <span class="submitted">Submitted by Lyndsey Clevesy on Mon, 2010/04/19 - 1:17pm</span>
    <div class="serviceTags">
    	<div class="service-links"><div class="item-list"><ul><li class="first"><a href="http://del.icio.us/post?url=http%3A%2F%2Fbooks.dzone.com%2Farticles%2Fslope-one-recommender&amp;title=Slope-one+Recommender+-+Exclusive+Article+from+Mahout+in+Action" title="Bookmark this post on del.icio.us." rel="nofollow"><img src="http://cdn.dzone.com/sites/all/modules/service_links/images/delicious.png" alt="Delicious" /></a></li>
<li class="first"><a href="http://digg.com/submit?phase=2&amp;url=http%3A%2F%2Fbooks.dzone.com%2Farticles%2Fslope-one-recommender&amp;title=Slope-one+Recommender+-+Exclusive+Article+from+Mahout+in+Action" title="Digg this post on digg.com." rel="nofollow"><img src="http://cdn.dzone.com/sites/all/modules/service_links/images/digg.png" alt="Digg" /></a></li>
<li class="first"><a href="http://www.stumbleupon.com/submit?url=http%3A%2F%2Fbooks.dzone.com%2Farticles%2Fslope-one-recommender&amp;title=Slope-one+Recommender+-+Exclusive+Article+from+Mahout+in+Action" title="Thumb this up at StumbleUpon." rel="nofollow"><img src="http://cdn.dzone.com/sites/all/modules/service_links/images/stumbleit.png" alt="StumbleUpon" /></a></li>
<li class="first"><a href="http://reddit.com/submit?url=http%3A%2F%2Fbooks.dzone.com%2Farticles%2Fslope-one-recommender&amp;title=Slope-one+Recommender+-+Exclusive+Article+from+Mahout+in+Action" title="Submit this post on reddit.com." rel="nofollow"><img src="http://cdn.dzone.com/sites/all/modules/service_links/images/reddit.png" alt="Reddit" /></a></li>
<li class="first"><a href="http://technorati.com/search/http%3A%2F%2Fbooks.dzone.com%2Farticles%2Fslope-one-recommender" title="Search Technorati for links to this post." rel="nofollow"><img src="http://cdn.dzone.com/sites/all/modules/service_links/images/technorati.png" alt="Technorati" /></a></li>
</ul></div></div>        <span class="terms">Tags: <ul class="links inline"><li class="taxonomy_term_4360 first"><a href="/category/dzone-taxonomy/java" rel="tag" title="">Java</a></li>
<li class="taxonomy_term_489"><a href="/category/tags/apache" rel="tag" title="">apache</a></li>
<li class="taxonomy_term_24971"><a href="/category/tags/mahout" rel="tag" title="">mahout</a></li>
<li class="taxonomy_term_4304"><a href="/category/tags/manning" rel="tag" title="">Manning</a></li>
<li class="taxonomy_term_24973"><a href="/category/tags/slope-one-recommender" rel="tag" title="">slope-one recommender approach</a></li>
<li class="taxonomy_term_8566"><a href="/category/tags/storage" rel="tag" title="">storage</a></li>
<li class="taxonomy_term_24975 last"><a href="/category/tags/weighting" rel="tag" title="">weighting</a></li>
</ul></span>
    </div>
  </div>
 
  <div class="content" style="margin-bottom: 5px;">      		<div class="related_library_content" style="float: right;"><h3>We Recommend These Resources</h3><h4 style="background: url(/sites/all/modules/dzone/dzone_library/icons/page_external.png) no-repeat 0 0;" class="sponsored_link"><a href="http://library.dzone.com/assets/request/sponsored_link/32727?oid=rel21417">Implementing Enterprise Integration Patterns</a></h4><h4 style="background: url(/sites/all/modules/dzone/dzone_library/icons/page_external.png) no-repeat 0 0;" class="sponsored_link"><a href="http://library.dzone.com/assets/request/sponsored_link/31709?oid=rel21417">Getting Started with FUSE ESB 4 Tutorial: Building, Installing and Running FUSE</a></h4><h4 style="background: url(/sites/all/modules/dzone/dzone_library/icons/page_external.png) no-repeat 0 0;" class="sponsored_link"><a href="http://library.dzone.com/assets/request/sponsored_link/31717?oid=rel21417">Getting Started with FUSE ESB 4 Tutorial: Use Case 5</a></h4><h4 style="background: url(/sites/all/modules/dzone/dzone_library/icons/page_external.png) no-repeat 0 0;" class="sponsored_link"><a href="http://library.dzone.com/assets/request/sponsored_link/31713?oid=rel21417">Getting Started with FUSE ESB 4 Tutorial: Use Case 2</a></h4><h4 style="background: url(/sites/all/modules/dzone/dzone_library/icons/page_external.png) no-repeat 0 0;" class="sponsored_link"><a href="http://library.dzone.com/assets/request/sponsored_link/32723?oid=rel21417">Configuring and Running FUSE ESB</a></h4></div>		<span class='print-link'></span><p><img src="/sites/all/files/owen_cover150.jpg" style="margin-right: 6px" align="left" border="0" height="113" width="91" /><i>This article is taken from <a href="http://www.manning.com/owen">Mahout in Action</a> by Sean Owen, Robin Anil, Ted Dunning, and Ellen Friedman. The authors discuss the slope-one recommender approach to recommendation based on differences in preference values between items. The authors explain the two types of weighting offered by slope-one recommender, which are based on count and standard deviation. The article also features an overview of storage options and computation distribution method. </i><br /><br />Did you like the movie “Carlito's Way”? Most people who liked this movie, it seems, also liked another film starring Al Pacino – like “Scarface”. But people tend to like Scarface a bit more. We'd imagine most people that think of Carlito's Way as a four-star movie would give Scarface five stars. So if you told me you thought Carlito's Way was a three-star movie, I might guess you'd give Scarface four stars – one more than the other film.<br /><br />If you agree with this sort of reasoning, you will like the slope-one recommender (<a href="http://en.wikipedia.org/wiki/Slope_One">http://en.wikipedia.org/wiki/Slope_One</a>). It estimates preferences for new items based on average difference in preference value (“diffs”) between a new item and the other items the user prefers.<br /><br />For example, let's say that we know that, on average, people rate Scarface higher by 1.0 than Carlito's Way. Let's also say we find everyone rates Scarface the same as The Godfather, on average.  And now, we are presented with a user who rates Carlito's Way 2.0, and The Godfather 4.0. What do we estimate his preference for Scarface would be?<br /><br />Based on Carlito's Way, we'd guess 2.0 + 1.0 = 3.0. Based on The Godfather, we'd guess 4.0 + 0.0 = 4.0. Taking a simple average of the two, we'd guess 3.5. This is the essence of the slope-one recommender approach.</p><h2><b>The algorithm</b></h2><p>Its name comes from the fact that the recommender algorithm starts with the assumption that there is some linear relationship between the preference values for one item and another and that we can in general estimate the preferences for some item y based on the preferences for item x, via some linear function like y = mx + b. Then, the slope-one recommender makes the additional simplifying assumption that m = 1: “slope one”. We're left attempting to find b = y – x, the (average) difference in preference value, for every pair of items.</p><p>So, the algorithm consists of a significant preprocessing phase, in which all item-item preference value differences are computed:<br /><br />for every item i<br />  for every other item j<br />    for every user u expressing preference for both i and j<br />      add the difference in u’s preference for i and j to an average<br /><br />And then, the recommendation algorithm becomes:<br /><br />for every item i the user u expresses no preference for<br />  for every item j that user u expresses a preference for<br />    find the average preference difference between j and i<br />    add this diff to u’s preference value for j<br />    add this to a running average<br />return the top items, ranked by these averages<br /><br />The average diffs over the small sample recommender input we have been using throughout the book are showing in Table 1.<br /><br />Table 1 Average difference in preference value between all pairs of items. Cells along the diagonal are 0.0. Cells in the bottom left are simply the negative of their counterparts across the diagonal. Hence these are not represented explicitly. Some diffs don’t exist, such as 102 through 107, since no user expressed a preference for both 102 and 107.<br /><br /><img src="/sites/all/files/pic%201.png" height="209" width="469" /></p><p>Slope-one is attractive because the on-line portion of the algorithm is fast. Like an item-based recommender, its performance does not depend upon the number of users in the data model. It depends only upon the average preference difference between every pair of items, which can be pre-computed. Further, its underlying data structure can be efficiently updated: when a preference changes, it’s simple to update relevant diff values. In contexts where preferences may change quickly, this is an asset.<br /><br />Note that the memory requirements necessary to store all of these item-item differences in preference value grow as the square of the number of items. Twice as many items means four times the memory!</p><h2><b>Slope-one in practice</b></h2><p>We can easily try the slope-one recommender by simply employing the code below. Note that the slope-one recommender takes no similarity metric as a necessary argument: new SlopeOneRecommender(model).<br /><br />After running a standard evaluation using the GroupLens 10M ratings data set (go to http://grouplens.org and check out the 10 million rating data set), you’ll get a result near 0.65. That’s the best yet. Indeed, the simple slope-one approach works well in many cases. This algorithm does not make use of a similarity metric, unlike the other approaches we have looked at. It has relatively few “knobs” to twiddle. <br /><br />The simplest form of the slope-one algorithm has a vulnerability: item-item diffs are given equal weighting regardless of how “reliable” they are and how much data they are based upon. Let’s say only one user in the history of movie watching has rated both Carlito’s Way and The Notebook. It’s possible; they’re quite different films. We could compute a diff for these two films. Would it be as useful as the diff we compute between Carlito’s Way and The Godfather, averaged over thousands of users? It sounds unlikely. The latter diff is probably more reliable since it is an average over a higher count of users.<br /><br />Again, we can employ some form of weighting to improve recommendations by taking some account of this. SlopeOneRecommender offers two types of weighting: weighting based on count and on standard deviation. Slope-one estimates preference values by adding diffs to all of the user’s current preference values and then averaging all of those results together to form an estimate. Count weighting will weight more heavily those elements based on diffs that are based on more data and more users who have expressed a preference for both items in question. In particular, the average becomes a weighted average, where the diff “count” is the weight – the number of users on which the diff is based.






<!--[if gte mso 9]><xml>
 <o:OfficeDocumentSettings>
  <o:AllowPNG/>
 </o:OfficeDocumentSettings>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:Zoom>0</w:Zoom>
  <w:TrackMoves>false</w:TrackMoves>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:DrawingGridHorizontalSpacing>18 pt</w:DrawingGridHorizontalSpacing>
  <w:DrawingGridVerticalSpacing>18 pt</w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>0</w:DisplayVerticalDrawingGridEvery>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:DontGrowAutofit/>
   <w:DontAutofitConstrainedTables/>
   <w:DontVertAlignInTxbx/>
  </w:Compatibility>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="276">
 </w:LatentStyles>
</xml><![endif]-->

<!--
 /* Font Definitions */
@font-face
	{font-family:Times;
	panose-1:2 0 5 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:Times;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:Times;}
p.Body, li.Body, div.Body
	{mso-style-name:"\.Body";
	mso-style-parent:"";
	mso-style-link:"\.Body Char";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:13.7pt;
	line-height:12.5pt;
	mso-line-height-rule:exactly;
	mso-pagination:widow-orphan;
	mso-hyphenate:none;
	tab-stops:.25in;
	font-size:8.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:Verdana;
	mso-fareast-font-family:"Times New Roman";
	mso-hansi-font-family:Verdana;
	mso-bidi-font-family:"Times New Roman";
	color:black;}
span.BodyChar
	{mso-style-name:"\.Body Char";
	mso-style-locked:yes;
	mso-style-link:"\.Body";
	mso-ansi-font-size:8.0pt;
	font-family:Verdana;
	mso-ascii-font-family:Verdana;
	mso-hansi-font-family:Verdana;
	color:black;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->

<!--[if gte mso 10]>
<style>
 /* Style Definitions */
table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:Cambria;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Cambria;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;}
</style>
<![endif]-->

<!--StartFragment--><!--EndFragment-->
<br /><br />Similarly, standard deviation weighting will weight according to the standard deviation of difference in preference value. Lower standard deviation means higher weighting. If the difference in preference value between two films is very consistent across many users, it seems more reliable and should be given more weight. If it varies considerably from user to user, then it should be deemphasized.<br /><br />These variants turn out to be enough of a good idea that they are enabled by default. You already We could disable them to see the effect, as seen in Listing 1.</p><h4><b>Listing 1 Selecting no weighting with a SlopeOneRecommender</b></h4><p>DiffStorage diffStorage = new MemoryDiffStorage(<br />    model, Weighting.UNWEIGHTED, false, Long.MAX_VALUE));<br />return new SlopeOneRecommender(<br /> model,<br /> Weighting.UNWEIGHTED,<br /> Weighting.UNWEIGHTED, <br /> diffStorage);<br /><br />The result is 0.67 -- only slightly worse on this data set. </p><h2>DiffStorage and memory considerations</h2><p>Slope-one does have its price, as we noted: memory consumption. In fact, if you tweak the evaluation to use even 10% of all data (about 100,000 ratings), even a 1 gigabyte heap won’t be enough. The diffs are used so frequently, and it’s so relatively expensive to compute them, that they do need to be computed and stored ahead of time. But, keeping them all in memory can get expensive.<br /><br />Storage of diffs is encapsulated separately in implementations of DiffStorage. We’ve been using, by default, MemoryDiffStorage so far. Not surprisingly, this implementation keeps diffs in memory. It offers one constructor parameter that can trade off some accuracy for slightly less memory consumption: compactAverages. This will cause the implementation to use smaller primitive data types to store count, average, and standard deviation. It’s worth a try if pressed for memory, but, by that point you will want to look to storing the diffs externally, such as in a database. Fortunately, implementations like MySQLJDBCDiffStorage exist for this purpose. It must be used in conjunction with a JDBC-backed DataModel implementation like MySQLJDBCDataModel, as seen in Listing 2.</p><h4><b>Listing 2 Creating a JDBC-backed DiffStorage </b></h4><p>AbstractJDBCDataModel model = new MySQLJDBCDataModel();<br />DiffStorage diffStorage = new MySQLJDBCDiffStorage(model);<br />Recommender recommender = new SlopeOneRecommender(<br />    model, Weighting.WEIGHTED, Weighting.WEIGHTED, diffStorage);</p><p>As with MySQLJDBCDataModel, the table name and column names used by MySQLJDBCDiffStorage can be customized via constructor parameters.</p><h2><b>Distributing the precomputation</b></h2><p>Precomputing the item-item diffs is significant work. While it is more likely that the size of your data will cause problems with memory requirements before the time required to compute these diffs becomes problematic, you might be wondering if there are ways to distribute this computation to complete faster. Diffs can be updated easily at runtime in response to new information, so, a relatively infrequent offline precomputation process is feasible in this model. Distributing the diff computation via Hadoop is supported. </p><h2><b>Summary</b></h2><p>In this article, we examined a slope-one recommender, a unique and relatively simple approach to recommendation based on average differences in preference values between items. It requires significant precomputation and storage for these diffs, and so we explored how to store these both in memory and in a database.</p><p>&nbsp;</p><p>&nbsp;</p><table id="attachments" class="sticky-enabled">
 <thead><tr><th>Attachment</th><th>Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td><a href="http://books.dzone.com/sites/all/files/pic 1.png">pic 1.png</a></td><td>13.83 KB</td> </tr>
 <tr class="even"><td><a href="http://books.dzone.com/sites/all/files/owen_cover150.jpg">owen_cover150.jpg</a></td><td>19.85 KB</td> </tr>
</tbody>
</table>
<div class="fivestar-static-form-item"><div class="form-item">
 <label>Your rating: </label>
 <div class="fivestar-widget-static fivestar-widget-static-vote fivestar-widget-static-5 clear-block"><div class="star star-1 star-odd star-first"><span class="off">0</span></div><div class="star star-2 star-even"><span class="off"></span></div><div class="star star-3 star-odd"><span class="off"></span></div><div class="star star-4 star-even"><span class="off"></span></div><div class="star star-5 star-odd star-last"><span class="off"></span></div></div>
 <div class="description"><div class="fivestar-summary fivestar-summary-average-count"><span class="average-rating">Average: <span>3</span></span> <span class="total-votes">(<span>1</span> vote)</span></div></div>
</div>
</div>					<div style="clear: both;"></div>

    </div>
<ul class="links inline"><li class="comment_forbidden first"><span><a href="/user/login?destination=node%2F21417%23comment-form">Login</a> or <a href="/user/register?destination=node%2F21417%23comment-form">register</a> to post comments</span></li>
<li class="statistics_counter"><span>5035 reads</span></li>
<li class="print_html last"><a href="/print/21417" title="Display a printer-friendly version of this page." class="print-page" rel="nofollow">Printer-friendly version</a></li>
</ul><p style="font-size: 11px; padding-left: 1em;" class="disclaimer"><em>(Note: Opinions expressed in this article and its replies are the opinions of their respective authors and not those of DZone, Inc.)</em></p></div><div id="comments"><h2 class="comments">Comments</h2><a id="comment-29163"></a>
<div class="comment odd">
		
		  	   		<a href="/users/aamiriqbal"><img src="http://cdn.dzone.com/sites/all/files/imagecache/user_48/avatars/picture-286863.jpg" alt="" title=""  class="avatar" width="48" height="48" /></a> 
    <div class="comment-wrap">
      <div class="tl"><!-- --></div>  
	    	<h3>Aamir Iqbal replied on Wed, 2010/04/21 - 1:16pm</h3>
  	   	
	<div class="comment-content">
		   <!--paging_filter--><p>A very good Article.... Thanks for sharing ............... one more thing.. can i have ur email address Miss.Lyndsey.... ?????</p><p>&nbsp;</p><p>&nbsp;</p><p>waiting for your reponse.. </p>		       			<div class="actions"><ul class="links"><li class="comment_forbidden first last"><span><a href="/user/login?destination=node%2F21417%23comment-form">Login</a> or <a href="/user/register?destination=node%2F21417%23comment-form">register</a> to post comments</span></li>
</ul></div>
  				</div>
 </div>
</div><form action="/articles/slope-one-recommender"  accept-charset="UTF-8" method="post" id="comment-controls">
<div><div class="box">

  <h2>Comment viewing options</h2>

  <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-a7f0d9734911327ab4d3c3922688ccd9" value="form-a7f0d9734911327ab4d3c3922688ccd9"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30" selected="selected">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
</div>

</div></form>
</div></div>
		</div>
	</div></div>
	<!-- end of squeeze, center (main content) -->
						<div id="sidebar-right" class="sidebar">

			                
		    <div id="search_bar" style="margin-bottom: 0px; padding-bottom: 0;">
	            <form action="/search/google"  accept-charset="UTF-8" method="get" id="google-cse-searchbox-form">
<div><input type="hidden" name="cx" id="edit-cx" value="010821965829155306098:ogyaz_5nsc8"  />
<input type="hidden" name="cof" id="edit-cof" value="FORID:11"  />
<div class="form-item" id="edit-query-wrapper">
 <input type="text" maxlength="128" name="query" id="edit-query" size="15" value="" title="Enter the terms you wish to search for." class="form-text" />
</div>
<input type="submit" name="op" id="edit-sa" value="Search"  class="form-submit" />
<input type="hidden" name="form_build_id" id="form-80c5b0cf325ba1a72e69a51e84bb917a" value="form-80c5b0cf325ba1a72e69a51e84bb917a"  />
<input type="hidden" name="form_id" id="edit-google-cse-searchbox-form" value="google_cse_searchbox_form"  />

</div></form>
            </div>

				                                <div id="followButtons" style="margin-top: 10px; margin-bottom: 10px;">
                                                <a href="http://feeds.dzone.com/zones/books" target="_blank" title="Subscribe to the RSS feed"><img width="32" height="32" style="margin-right: 5px;" src="http://cdn.dzone.com/links/themes/reader/images/actions/feed-32x32.png" border="0"></a>
                                                <a href="http://www.linkedin.com/groups?gid=696877&trk=hb_side_g" target="_blank" title="Join the DZone LinkedIn group"><img width="32" height="32" tyle="margin-right: 5px;" src="http://cdn.dzone.com/links/themes/reader/images/actions/linkedin-32x32.png" border="0"></a>
                        <a href="http://twitter.com/dzone" title="Follow DZone on Twitter" target="_blank"><img style="margin-right: 5px;" width="32" height="32" src="http://cdn.dzone.com/links/themes/reader/images/actions/twitter-32x32.png" border="0"></a>
                        <a href="http://www.facebook.com/home.php?#/pages/DZone/259639764711?ref=sgm" target="_blank" title="Become a DZone fan on Facebook"><img style="margin-right: 5px;" width="32" height="32" src="http://cdn.dzone.com/links/themes/reader/images/actions/facebook-32x32.png" border="0"></a>
                        <a href="mailto:feedback@dzone.com" title="Email DZone"><img style="margin-right: 5px;" width="32" height="32" src="http://cdn.dzone.com/links/themes/reader/images/actions/email-32x32.png" border="0"></a>
                       <!-- Begin SupportSuite Javascript Code -->
	                           <script type="text/javascript" src="http://support.dzone.com/visitor/index.php?_m=livesupport&_a=htmlcode&departmentid=2"></script> 
                        <!-- End SupportSuite Javascript Code -->
                    </div>
                    			     
                                         <div id="mh_rectangle">
                        <!-- BEGIN ADVERTPRO ADVANCED CODE BLOCK -->
                         <SCRIPT language="JavaScript" type="text/javascript">
                        <!--
                        document.write('<SCR'+'IPT src="http://avpa.dzone.com/servlet/view/banner/javascript/zone?zid=106&keywords=books.dzone.com&pid=0&random='+Math.floor(89999999*Math.random()+10000000)+'&millis='+new Date().getTime()+'" language="JavaScript" type="text/javascript"></SCR'+'IPT>');
                        //-->
                        </SCRIPT>
                        <NOSCRIPT>
                        <a href="http://avpa.dzone.com/servlet/click/zone?zid=106&pid=0&lookup=true&position=1" target="_top"> <IMG src="http://avpa.dzone.com/servlet/view/banner/image/zone?zid=106&pid=0&position=1" hspace="0" vspace="0" border="0" alt="Click Here!"> </a>
                        </NOSCRIPT>
                        <!-- END ADVERT PRO ADVANCED CODE BLOCK -->
                    </div>
		        												<div id="block-block-7" class="block block-block">

  <div class="content">
    <!--paging_filter--><div style="padding-bottom: 7px; width: 285px"><h2>Get Free Tech Books!</h2>        <p><a href="http://www.dzone.com/reviewteam"><img src="/sites/all/themes/dzone/images/dz-reviewteam80x80.png" border="0" align="left" /></a><span style="display: block; padding-left: 85px; font-size: 12px; line-height: 115%"><a href="http://www.dzone.com/reviewteam">Join the DZone Review Team</a> to share your opinion and expertise through published book reviews and            Refcardz review discussions. You'll get free tech books and early access to Refcardz.</span></p>	</div>  </div>
</div>
<div id="block-dzone_extprofile-0" class="block block-dzone_extprofile">
  <h2>About the author</h2>

  <div class="content">
    <div class="author_info"><div class="node_author_pic" style="float: left;"><img src="http://cdn.dzone.com/sites/all/files/imagecache/user_90/avatars/picture-398735.png" alt="" title=""  width="90" height="90" /></div><div class="node_author_fields"><p><strong>First Name</strong>: Lyndsey</p><p><strong>Last Name</strong>: Clevesy</p><p><b></b></p><p><strong>Posts:</strong> 137</p><p><strong>Joined:</strong> 03/30/2009</p><p><a href="/users/lyndsey">View full user profile</a></p></div></div><div style="clear: both;"></div>  </div>
</div>
<div id="block-block-5" class="block block-block">

  <div class="content">
    <div id="sidebar_features"><h2 class="header">Spotlight Features</h2>					  	<div>
	  		<a href="/click/30659/1"><img src="http://cdn.dzone.com/sites/all/files/imagecache/spotlight_80/flex-blaze-hibernate.png" alt="" title=""  class="node_author_pic" width="80" height="60" /></a>
	  		<h2><a href="/click/30659/1">Lazy Loading - From Java to Flex</a></h2>
	  		<p>Sending complex object graphs from Java to Flex can be problematic. Learn how lazy loading can be more effective.</p>	
	  	</div>
	  	<div>
	  		<a href="/click/30405/1"><img src="http://cdn.dzone.com/sites/all/files/imagecache/spotlight_80/refcard-solr.png" alt="" title=""  class="node_author_pic" width="80" height="60" /></a>
	  		<h2><a href="/click/30405/1">Solr: 'Search' for the Enterprise</a></h2>
	  		<p>Develop high performance search applications with faceting, dynamic clustering, database integration and more. </p>	
	  	</div>
	  	<div>
	  		<a href="/click/30663/1"><img src="http://cdn.dzone.com/sites/all/files/imagecache/spotlight_80/refcard-alm.png" alt="" title=""  class="node_author_pic" width="80" height="60" /></a>
	  		<h2><a href="/click/30663/1">Application Lifecycle Management</a></h2>
	  		<p>Covers end-to-end ALM, change request tracking, inventory control, process and deployment automation, and more.</p>	
	  	</div>
</div>  </div>
</div>
								</div>
		<!-- end of right sidebar -->
			
	<div id="footer"><div id="legal"><a href="/page/advertise">Advertising</a> - <a href="/page/tos">Terms of Service</a> - <a href="/page/privacy">Privacy</a> - &copy; 1997-2010, DZone, Inc.</div>
	</div>
	<!-- end of footer -->

</div><!-- end of container -->
</div><!-- end of wrapper -->
<script type="text/javascript" src="http://cdn.dzone.com/sites/all/files/js/js_1a003b12a48841e82c352af6ceaec81a.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/", "fivestar": { "titleUser": "Your rating: ", "titleAverage": "Average: ", "feedbackSavingVote": "Saving your vote...", "feedbackVoteSaved": "Your vote has been saved.", "feedbackDeletingVote": "Deleting your vote...", "feedbackVoteDeleted": "Your vote has been deleted." }, "jstools": { "cleanurls": true, "basePath": "/" }, "activemenu": { "#block-book-0": "activemenu/book", "#block-menu-devel": "activemenu/menu", "#block-menu-menu-library-navigat": "activemenu/menu", "#block-menu-primary-links": "activemenu/menu", "#block-menu-secondary-links": "activemenu/menu", "#block-menu-menu-sections": "activemenu/menu", "#block-menu-menu-zones": "activemenu/menu", "#block-user-1": "activemenu/menu" } });
//--><!]]>
</script>
<script type="text/javascript"> 
    SyntaxHighlighter.config.bloggerMode = true;
    SyntaxHighlighter.config.taName = "pre";
    SyntaxHighlighter.config.clipboardSwf = '/sites/all/themes/dzone/scripts/syntaxHighlighter/clipboard.swf';
    SyntaxHighlighter.all();
    dp.SyntaxHighlighter.HighlightAll('code');
</script>

<script type="text/javascript" src="/sites/all/files/js/js_def5b13468ddfa4386970cbe7d780b8e.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "googleCSE": { "language": "en" } });
//--><!]]>
</script>
	<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-410289-1");
pageTracker._setDomainName(".dzone.com");
pageTracker._initData();
pageTracker._trackPageview();
</script>
 
<!-- Start Quantcast tag -->
<script type="text/javascript">
_qoptions={
qacct:"p-ebK_XdQH1HeLo"
};
</script>
<script type="text/javascript" src="http://edge.quantserve.com/quant.js"></script>
<noscript>
<img src="http://pixel.quantserve.com/pixel/p-ebK_XdQH1HeLo.gif" style="display: none;" border="0" height="1" width="1" alt="Quantcast"/>
</noscript>
<!-- End Quantcast tag -->
<script type="text/javascript" language="JavaScript"
src="http://certify.alexametrics.com/atrk.js"></script>
<script type="text/javascript" language="JavaScript">_atrk_opts = {
atrk_acct: "2Zc291a0g0y12X" }; atrk ();</script>
<noscript><img
src="http://certify.alexametrics.com/atrk.gif?account=2Zc291a0g0y12X&jsv=20080822" style="display:none" height="1" width="1"></noscript>		    </body>
</html>
