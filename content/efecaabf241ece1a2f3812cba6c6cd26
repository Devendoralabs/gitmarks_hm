<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    
      <title>gist: 28405 - http://anyall.org/blog/2008/11/python-bindings-to-googles-ajax-search-api/- GitHub</title>
    

    <link href="https://assets1.github.com/stylesheets/bundle_common.css?9be3b31760b2ed1e0983740b292778ab7067fa37" media="screen" rel="stylesheet" type="text/css" />
<link href="https://assets3.github.com/stylesheets/bundle_gist.css?9be3b31760b2ed1e0983740b292778ab7067fa37" media="screen" rel="stylesheet" type="text/css" />

    <script type="text/javascript" charset="utf-8">
      var GitHub = {}
    </script>
    <script src="https://assets2.github.com/javascripts/jquery/jquery-1.4.2.min.js?9be3b31760b2ed1e0983740b292778ab7067fa37" type="text/javascript"></script>
    <script src="https://assets2.github.com/javascripts/bundle_common.js?9be3b31760b2ed1e0983740b292778ab7067fa37" type="text/javascript"></script>
<script src="https://assets0.github.com/javascripts/bundle_gist.js?9be3b31760b2ed1e0983740b292778ab7067fa37" type="text/javascript"></script>

            
    
  <link href="https://github.com/api/oembed?format=json&amp;url=https%3A%2F%2Fgist.github.com%2F28405" rel="alternate" title="gist: 28405" type="application/json+oembed" />
  

        <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-3769691-4']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script');
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        ga.setAttribute('async', 'true');
        document.documentElement.firstChild.appendChild(ga);
      })();
    </script>

  </head>

  <body>
    <div id="main">
      <div id="header" class="">
        <div class="site">
          <div class="logo">
            <a href="/"><img src="/images/modules/header/logo_gist.png" alt="gist" /></a>
          </div>

          
            <ul class="nav logged_out">
              <li><a href="/login?return_to=gist">Login</a></li>
              <li><a href="https://github.com/signup?return_to=gist">Signup for a GitHub Account</a></li>
            </ul>
          

          <div class="topsearch">
            <form action="/gists/search" id="top_search_form" method="get">
              <input type="search" name="q" value="" results="5" class="search" placeholder="Search Gists&hellip;" /> <input type="submit" value="Search" class="button" />
              <input type="hidden" name="page" value="1" />
            </form>

            <ul class="nav">
              <li><a href="/">New Gist</a></li>
              
              <li><a href="/gists">All Gists</a></li>
              <li><a href="https://github.com">Back to GitHub</a></li>
            </ul>
          </div><!-- /.topsearch -->
        </div>
      </div>

    <div class="site">
      
<div class="secondary">

  <div id="owner">
    
      <div class="actor">
        <div class="gravatar">
          <img src="https://secure.gravatar.com/avatar/fd4b164e15fa2a834d16fb8743ec4f1b?s=140&d=https%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-140.png" alt="" width="30" height="30"  />
        </div>
        <div class="name"><a href="/brendano">brendano</a> <span>(owner)</span></div>
      </div>
    
  </div>

  

  
  
    <div class="fork-info" id="forks">
      <h3>Forks</h3>
      <ul class="gists forks">
      
        <li>
          <a href="/34853">gist: 34853</a>
          by <a href="/richtrf">richtrf</a>
          <span class="description"></span>
          <small>created <span class="date"><abbr class="relatize" title="2008-12-11 12:10:50">Thu Dec 11 12:10:50 -0800 2008</abbr></span></small>
        </li>
      
        <li>
          <a href="/78822">gist: 78822</a>
          by <a href="/mvaz">mvaz</a>
          <span class="description"></span>
          <small>created <span class="date"><abbr class="relatize" title="2009-03-13 16:14:08">Fri Mar 13 16:14:08 -0700 2009</abbr></span></small>
        </li>
      
      </ul>
    </div>
  

  
  
  <div id="revisions">
    <h3>Revisions</h3>
    <ul>
      
      
        
        <li class="current">
          <img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_red.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/>
          <a href="https://gist.github.com/28405/87630f0ff1761b085ddbc2fae5978d689e22a8fb" class="id">87630f</a>

          
            <a href="/brendano" class="author">brendano</a>
          
          <span class="date"><abbr class="relatize" title="2008-11-23 23:35:36">Sun Nov 23 23:35:36 -0800 2008</abbr></span>
        </li>
      
        
        <li class="other">
          <img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/>
          <a href="https://gist.github.com/28405/7cb9f55522dc80ca1426255fd2d903293ad10b12" class="id">7cb9f5</a>

          
            <a href="/brendano" class="author">brendano</a>
          
          <span class="date"><abbr class="relatize" title="2008-11-23 23:35:03">Sun Nov 23 23:35:03 -0800 2008</abbr></span>
        </li>
      
    </ul>
  </div>
  
</div><!-- /.secondary -->

<div class="main">
  <div id="repos">
    <div class="repo public">
      <div class="title">
        <div class="path">
          gist: 28405

          

          
            <a href="/gists/28405/download"><img alt="Download_button" border="0" class="button" src="https://assets1.github.com/images/modules/repos/download_button.png?9be3b31760b2ed1e0983740b292778ab7067fa37" /></a>
          

          
            
            <a href="http://github.com/signup"><img alt="fork" class="button" src="https://assets3.github.com/images/modules/repos/fork_button.png?9be3b31760b2ed1e0983740b292778ab7067fa37" /></a>
          
          
        </div>

        
          <div class="security public_security" style="">
            <a href="#public_repo" rel="facebox"><img src="/images/icons/public.png" alt="public" /></a>
          </div>
        

        <div id="private_repo" class="hidden">
          <h2>Private Gist</h2>
          <p>
            All pages are served over SSL and all pushing and pulling is done over SSH.
            No one may fork, clone, or view it unless they are given this private URL.
          </p>
          <p>Every gist with this icon (<img src="/images/icons/private.png" alt="private" />) is private.</p>
        </div>
        <div class="security public_security" style="display:none">
          <a href="#public_repo" rel="facebox"><img src="/images/icons/public.png" alt="public" /></a>
        </div>
        <div id="public_repo" class="hidden">
          <h2>Public Gist</h2>
          <p>Anyone may fork, clone, or view it.</p>
          <p>Every repository with this icon (<img src="/images/icons/public.png" alt="public" />) is public.</p>
        </div>
      </div>

      <div class="meta">
        <table>
          
          <tr>
            <td class="label">Description:</td>
            <td>
              <div class="description">
                <span id="gist-text-description" class="edit">http://anyall.org/blog/2008/11/python-bindings-to-googles-ajax-search-api/</span>
                
              </div>
            </td>
          </tr>
          

          
            <tr>
              <td class="label">Public Clone URL:</td>
              <td>
                <a rel="#git-clone" class="git_url_facebox" href="git://gist.github.com/28405.git">git://gist.github.com/28405.git</a>
                <div id="git-clone" style="display:none; min-width:500px">
                  Give this clone URL to anyone.
                  <br/>

                  <code>git clone git://gist.github.com/28405.git gist-28405</code>
                </div>
              </td>
            </tr>
          

          

          
            <tr>
              <td class="label">Embed All Files:</td>
              <td>
                <a href="#" class="gist-embed-link">show embed</a>
                <input class="gist-embed-box" type="text" size="25" value='<script src="https://gist.github.com/28405.js"> </script>' style="display:none;"/>
              </td>
            </tr>
          

        </table>
      </div>
    </div>
  </div>

  <div id="files">

    
    
      

      <div class="file" id="file_ajaxgoogle.py">
  <div class="meta clearfix">
    <div class="info">
      <span class="code">ajaxgoogle.py <a href="#file_ajaxgoogle.py">#</a></span>
    </div>
    <div class="actions">
      
      <div id="gist-embed" style="display:inline;">
        <a href="#" class="gist-embed-link">embed</a>
        <input class="gist-embed-box" type="text" size="25" value='<script src="https://gist.github.com/28405.js?file=ajaxgoogle.py"></script>' style="display:none;"/>
      </div>
      
      
      <a href="/raw/28405/e2316a946a600f3529351e8cd09ca816b90a2462/ajaxgoogle.py">raw</a>
    </div>
  </div>
  
  
  <div class="data type-python">
    
      <table cellpadding="0" cellspacing="0">
        <tr>
          <td>
            <pre class="line_numbers"><span id="LID1" rel="#L1">1</span>
<span id="LID2" rel="#L2">2</span>
<span id="LID3" rel="#L3">3</span>
<span id="LID4" rel="#L4">4</span>
<span id="LID5" rel="#L5">5</span>
<span id="LID6" rel="#L6">6</span>
<span id="LID7" rel="#L7">7</span>
<span id="LID8" rel="#L8">8</span>
<span id="LID9" rel="#L9">9</span>
<span id="LID10" rel="#L10">10</span>
<span id="LID11" rel="#L11">11</span>
<span id="LID12" rel="#L12">12</span>
<span id="LID13" rel="#L13">13</span>
<span id="LID14" rel="#L14">14</span>
<span id="LID15" rel="#L15">15</span>
<span id="LID16" rel="#L16">16</span>
<span id="LID17" rel="#L17">17</span>
<span id="LID18" rel="#L18">18</span>
<span id="LID19" rel="#L19">19</span>
<span id="LID20" rel="#L20">20</span>
<span id="LID21" rel="#L21">21</span>
<span id="LID22" rel="#L22">22</span>
<span id="LID23" rel="#L23">23</span>
<span id="LID24" rel="#L24">24</span>
<span id="LID25" rel="#L25">25</span>
<span id="LID26" rel="#L26">26</span>
<span id="LID27" rel="#L27">27</span>
<span id="LID28" rel="#L28">28</span>
<span id="LID29" rel="#L29">29</span>
<span id="LID30" rel="#L30">30</span>
<span id="LID31" rel="#L31">31</span>
<span id="LID32" rel="#L32">32</span>
<span id="LID33" rel="#L33">33</span>
<span id="LID34" rel="#L34">34</span>
<span id="LID35" rel="#L35">35</span>
<span id="LID36" rel="#L36">36</span>
<span id="LID37" rel="#L37">37</span>
<span id="LID38" rel="#L38">38</span>
<span id="LID39" rel="#L39">39</span>
<span id="LID40" rel="#L40">40</span>
<span id="LID41" rel="#L41">41</span>
<span id="LID42" rel="#L42">42</span>
<span id="LID43" rel="#L43">43</span>
<span id="LID44" rel="#L44">44</span>
<span id="LID45" rel="#L45">45</span>
<span id="LID46" rel="#L46">46</span>
<span id="LID47" rel="#L47">47</span>
<span id="LID48" rel="#L48">48</span>
<span id="LID49" rel="#L49">49</span>
<span id="LID50" rel="#L50">50</span>
</pre>
          </td>
          <td width="100%">
            
              
                <div class="highlight"><pre><div class='line' id='LC1'><span class="sd">"""ajaxgoogle.py - Simple bindings to the AJAX Google Search API</span></div><div class='line' id='LC2'><span class="sd">(Just the JSON-over-HTTP bit of it, nothing to do with AJAX per se)</span></div><div class='line' id='LC3'><span class="sd">http://code.google.com/apis/ajaxsearch/documentation/reference.html#_intro_fonje</span></div><div class='line' id='LC4'><span class="sd">brendan o&#39;connor - gist.github.com/28405 - anyall.org"""</span></div><div class='line' id='LC5'><span class="k">try</span><span class="p">:</span></div><div class='line' id='LC6'>&nbsp;&nbsp;<span class="kn">import</span> <span class="nn">json</span></div><div class='line' id='LC7'><span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span></div><div class='line' id='LC8'>&nbsp;&nbsp;<span class="kn">import</span> <span class="nn">simplejson</span> <span class="kn">as</span> <span class="nn">json</span></div><div class='line' id='LC9'><br/></div><div class='line' id='LC10'><span class="kn">import</span> <span class="nn">urllib</span><span class="o">,</span> <span class="nn">urllib2</span></div><div class='line' id='LC11'><span class="kn">import</span> <span class="nn">os.path</span></div><div class='line' id='LC12'><br/></div><div class='line' id='LC13'><span class="n">TEMPLATE</span> <span class="o">=</span> <span class="s">"http://ajax.googleapis.com/ajax/services/search/web?v=1.0"</span></div><div class='line' id='LC14'><br/></div><div class='line' id='LC15'><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;HOME&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s">&#39;/.ajaxgooglekey&#39;</span><span class="p">):</span></div><div class='line' id='LC16'>&nbsp;&nbsp;<span class="n">KEY</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;HOME&#39;</span><span class="p">]</span><span class="o">+</span><span class="s">&#39;/.ajaxgooglekey&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span></div><div class='line' id='LC17'><span class="k">else</span><span class="p">:</span></div><div class='line' id='LC18'>&nbsp;&nbsp;<span class="n">KEY</span> <span class="o">=</span> <span class="bp">None</span></div><div class='line' id='LC19'><span class="k">if</span> <span class="n">KEY</span><span class="p">:</span></div><div class='line' id='LC20'>&nbsp;&nbsp;<span class="n">TEMPLATE</span> <span class="o">+=</span> <span class="s">"&amp;key="</span> <span class="o">+</span> <span class="n">KEY</span></div><div class='line' id='LC21'><br/></div><div class='line' id='LC22'><span class="k">def</span> <span class="nf">search_url</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span></div><div class='line' id='LC23'>&nbsp;&nbsp;<span class="n">url</span> <span class="o">=</span> <span class="n">TEMPLATE</span></div><div class='line' id='LC24'>&nbsp;&nbsp;<span class="n">url</span> <span class="o">+=</span> <span class="s">"&amp;q="</span> <span class="o">+</span> <span class="n">urllib</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">q</span><span class="p">)</span></div><div class='line' id='LC25'>&nbsp;&nbsp;<span class="k">if</span> <span class="n">kwds</span><span class="p">:</span></div><div class='line' id='LC26'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">url</span> <span class="o">+=</span> <span class="s">"&amp;"</span> <span class="o">+</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlencode</span><span class="p">(</span><span class="n">kwds</span><span class="p">)</span></div><div class='line' id='LC27'>&nbsp;&nbsp;<span class="k">return</span> <span class="n">url</span></div><div class='line' id='LC28'><br/></div><div class='line' id='LC29'><span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span></div><div class='line' id='LC30'>&nbsp;&nbsp;<span class="sd">"""See options at http://code.google.com/apis/ajaxsearch/documentation/reference.html#_intro_fonje including:</span></div><div class='line' id='LC31'><span class="sd">    rsz= large | small  (8 vs 4)</span></div><div class='line' id='LC32'><span class="sd">    start= &lt;0-indexed offset&gt;</span></div><div class='line' id='LC33'><span class="sd">    hl= &lt;language of searcher&gt;</span></div><div class='line' id='LC34'><span class="sd">    lr= &lt;language of results&gt;</span></div><div class='line' id='LC35'><span class="sd">    safe= active | moderate | off</span></div><div class='line' id='LC36'><span class="sd">  """</span></div><div class='line' id='LC37'>&nbsp;&nbsp;<span class="n">f</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">search_url</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">))</span></div><div class='line' id='LC38'>&nbsp;&nbsp;<span class="n">ret</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span></div><div class='line' id='LC39'>&nbsp;&nbsp;<span class="k">if</span> <span class="n">ret</span><span class="p">[</span><span class="s">&#39;responseStatus&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">200</span> <span class="ow">and</span> <span class="n">ret</span><span class="p">[</span><span class="s">&#39;responseData&#39;</span><span class="p">]:</span>  <span class="k">return</span> <span class="n">ret</span><span class="p">[</span><span class="s">&#39;responseData&#39;</span><span class="p">]</span></div><div class='line' id='LC40'>&nbsp;&nbsp;<span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">"Google API error </span><span class="si">%s</span><span class="s">: </span><span class="si">%s</span><span class="se">\n</span><span class="s"> (</span><span class="si">%s</span><span class="s">)"</span> <span class="o">%</span> <span class="p">(</span><span class="n">ret</span><span class="p">[</span><span class="s">&#39;responseStatus&#39;</span><span class="p">],</span><span class="n">ret</span><span class="p">[</span><span class="s">&#39;responseDetails&#39;</span><span class="p">],</span><span class="nb">repr</span><span class="p">(</span><span class="n">ret</span><span class="p">)))</span></div><div class='line' id='LC41'><br/></div><div class='line' id='LC42'><br/></div><div class='line' id='LC43'><span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">&#39;__main__&#39;</span><span class="p">:</span></div><div class='line' id='LC44'>&nbsp;&nbsp;<span class="kn">import</span> <span class="nn">sys</span></div><div class='line' id='LC45'>&nbsp;&nbsp;<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span></div><div class='line' id='LC46'>&nbsp;&nbsp;<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span></div><div class='line' id='LC47'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">q</span> <span class="o">=</span> <span class="s">" "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span></div><div class='line' id='LC48'>&nbsp;&nbsp;<span class="k">else</span><span class="p">:</span> <span class="n">q</span> <span class="o">=</span> <span class="s">"query a question to whom in what sense"</span></div><div class='line' id='LC49'>&nbsp;&nbsp;<span class="n">pprint</span><span class="p">(</span><span class="n">search</span><span class="p">(</span><span class="n">q</span><span class="p">))</span></div><div class='line' id='LC50'><br/></div></pre></div>
              
            
          </td>
        </tr>
      </table>
    
  </div>


  
</div>


      

     <!-- cache end -->

    

  </div>

  
    <div id="comments">
      

      
        Please <a href="/login?return_to=https://gist.github.com/28405">log in</a> to comment.
      
    </div>
  

</div><!-- /.main -->

    </div> <!-- site -->

    <div class="push"></div>

    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="logo">
            <a href="http://github.com/">
              <img src="/images/modules/header/logo_white.png" alt="GitHub" />
            </a>
          </div>
          <div class="more">
            <div class="links">
              <a href="http://github.com/blog"><strong>Blog</strong></a> |
              <a href="http://support.github.com">Support</a> |
              <a href="http://github.com/contact">Contact</a> |
              <a href="http://github.com/site/privacy">Privacy</a> |
              <a href="http://github.com/site/terms">Terms of Service</a>
            </div>
            <div class="company">
              &copy;
              2010
              GitHub Inc.
              All rights reserved.
           </div>
          </div>
        </div>
        <div class="sponsor">
          <div>
            Powered by the <a href="http://www.rackspace.com ">Dedicated
            Servers</a> and<br/> <a href="http://www.rackspacecloud.com">Cloud
            Computing</a> of Rackspace Hosting<span>&reg;</span>
          </div>
          <a href="http://www.rackspace.com">
            <img alt="Dedicated Server" src="https://assets3.github.com/images/modules/footer/rackspace_logo.png?9be3b31760b2ed1e0983740b292778ab7067fa37" />
          </a>
        </div>
      </div>
    </div>

    <script>window._auth_token = "308eed23c59261f4d134ecb81482271050a223fb"</script>
  </body>
</html>
