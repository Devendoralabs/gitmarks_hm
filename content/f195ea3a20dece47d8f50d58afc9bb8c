<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>   Tokyo Cabinet: Beyond Key-Value Store - igvita.com</title>
<link rel="stylesheet" href="http://www.igvita.com/wp-content/themes/igvita/style.css" type="text/css" media="screen" />


<link rel="openid.server" href="http://www.myopenid.com/server" />
<link rel="openid.delegate" href="http://openid.igvita.com/igrigorik" />
<link rel="openid2.local_id" href="http://openid.igvita.com/igrigorik" />
<link rel="openid2.provider" href="http://www.myopenid.com/server" />

<link rel="alternate" type="application/rss+xml" title="igvita.com RSS Feed" href="http://www.igvita.com/feed/" />
<link rel="pingback" href="http://www.igvita.com/xmlrpc.php" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.igvita.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.igvita.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.7.1" />


<script type="text/javascript">
function showme(thisdiv)
{
   if(document.getElementById(thisdiv).style.display=='none')
   document.getElementById(thisdiv).style.display='block';
   else document.getElementById(thisdiv).style.display='none';
}
</script>

<style type="text/css">
div.aka_half {
	float: left;
	overflow: auto;
	width: 45%;
}
div.aka_clear {
	clear: both;
	float: none;
}
</style>
		<script type="text/javascript" src="http://yui.yahooapis.com/combo?2.8.0r4/build/yahoo-dom-event/yahoo-dom-event.js"></script><!-- ClickTale Top part -->
<script type="text/javascript">
var WRInitTime=(new Date()).getTime();
</script>
<!-- ClickTale end of Top part --><script type="text/javascript" src="http://www.igvita.com/wp-content/plugins/lifestream/lifestream.js"></script><link rel="stylesheet" type="text/css" media="screen" href="http://www.igvita.com/wp-content/plugins/lifestream/themes/default/media/lifestream.css"/>	<style type="text/css">
	a.postrank {
		border:1px solid #333333;
		color:#000000;
		display:block;
		float:right;
		font-size:1.2em;
		font-weight:bold;
		margin: 0 0.2em;
		position:relative;
		text-align:center;
		text-decoration: none;
		width:34px;
	}

	a.postrank span.topLeft, a.postrank span.topRight, a.postrank span.bottomLeft, a.postrank span.bottomRight {
		background:transparent url(http://www.igvita.com/wp-content/plugins/wp-postrank/images/corners.png) no-repeat scroll 0 0;
		display:block;
		height:3px;
		position:absolute;
		width:3px;
	}

	a.postrank span.topLeft {
		background-position:0 0;
		left:-1px;
		top:-1px;
	}

	a.postrank span.topRight {
		background-position:-3px 0;
		right:-1px;
		top:-1px;
	}

	a.postrank span.bottomLeft {
		background-position:0 -3px;
		left:-1px;
		bottom:-1px;
	}

	a.postrank span.bottomRight {
		background-position:-3px -3px;
		right:-1px;
		bottom:-1px;
	}

	/* metrics */
	#postrank_metrics { margin: 3px; background-color: #f6faff; border: 1px #c3d9ff solid; }
	#postrank_metrics table{ margin: 5px 0; font-size: 1.3em; border-collapse: collapse; }
	#postrank_metrics table td{ padding: 7px 11px 9px 14px; border: #c3d9ff solid; border-width: 0 0 0 1px; }
	#postrank_metrics table td:first-child{ border: 0; padding-left: 11px; }
	#postrank_metrics table td a, #postrank_metrics table td span{ padding: 1px 0 0 21px; background: url( http://postrank.com/graphics/spriteSet_3.png ) no-repeat; height: 15px; display: block; }
	#postrank_metrics .bloglines{ background-position: 0 -16px; }
	#postrank_metrics .reddit, #postrank_metrics .reddit_votes { background-position: 0 -32px; }
	#postrank_metrics .technorati{ background-position: 0 -48px; }
	#postrank_metrics .reddit_comments { background-position: 0 -416px; }
	#postrank_metrics .magnolia{ background-position: 0 -64px; }
	#postrank_metrics .digg{ background-position: 0 -80px; }
	#postrank_metrics .twitter{ background-position: 0 -96px; }
	#postrank_metrics .comments{ background-position: 0 -112px; }
	#postrank_metrics .icerocket{ background-position: 0 -128px; }
	#postrank_metrics .delicious{ background-position: 0 -144px; }
	#postrank_metrics .google{ background-position: 0 -160px; }
	#postrank_metrics .pownce{ background-position: 0 -176px; }
	#postrank_metrics .views{ background-position: 0 -192px; }
	#postrank_metrics .bookmarks{ background-position: 0 -208px; }
	#postrank_metrics .clicks{ background-position: 0 -224px; }
	#postrank_metrics .jaiku{ background-position: 0 -240px; }
	#postrank_metrics .identica{ background-position: 0 -352px; }
	#postrank_metrics .digg_comments{ background-position: 0 -256px; }
	#postrank_metrics .twitarmy{ background-position: 0 -336px; }
	#postrank_metrics .diigo{ background-position: 0 -272px; }
	#postrank_metrics .furl{ background-position: 0 -320px; }
	#postrank_metrics .brightkite{ background-position: 0 -304px; }
	#postrank_metrics .feecle{ background-position: 0 -288px; }
	#postrank_metrics .friendfeed_like{ background-position: 0 -368px; }
	#postrank_metrics .friendfeed_comm{ background-position: 0 -432px; }
	#postrank_metrics .blip{ background-position: 0 -384px; }
	#postrank_metrics .tumblr { background-position: 0 -400px; }
	</style>

<link rel="shortcut icon" href="/favicon.ico" />
<link rel="favicon" href="/favicon.ico" />

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-71196-3']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();
</script>

</head>
<body>
	<div id="header">
		<div class="inside">
			<h2><a href="http://www.igvita.com/"><img src="/wp-content/themes/igvita/images/igvita.gif" alt="igvita.com" /></a></h2>
			<p class="description">A goal is a dream with a deadline.</p>
			<div class="menu">
				<ul id="nav">
					<li><span>&nbsp;</span></li>
					<li class="page_item"><a  href="http://www.igvita.com/">Blog</a></li>
					<li class="page_item page-item-184"><a rel="me" href="http://www.igvita.com/lifestream/" title="Lifestream">Lifestream</a></li>
<li class="page_item page-item-31"><a rel="me" href="http://www.igvita.com/about/" title="About">About</a></li>
<li class="page_item page-item-96 current_page_ancestor"><a rel="me" href="http://www.igvita.com/archives/" title="Archives">Archives</a></li>
					<li><span class="right">&nbsp;</span></li>
				</ul>
			</div>
		</div>
	</div>
	<!-- [END] #header -->

	<div id="primary" class="single-post">
		<div class="inside">
						<div class="primary">
				<h3><span>Tokyo Cabinet: Beyond Key-Value Store</span></h3>
				<p><img align="left" style="margin-right: 1em;" src="http://www.igvita.com/posts/09/database.jpg"/>It took Ruby some time to go from an infant research project by Matz to a language we've all come to know so well. Now, another Japanese developer (<a href="http://alpha.mixi.co.jp/blog/?author=3">Mikio Hirabayashi</a>) has all the potential to repeat this cycle with his new database project: <a href="http://tokyocabinet.sourceforge.net/index.html">Tokyo Cabinet</a>. Developed and sponsored by <a href="http://mixi.co.jp/">Mixi Inc</a>. (Japanese Facebook), it is an incredibly fast, and feature rich database library. In fact, given the maturity of the project, it is surprising how little information is available on it outside of Japan. Let's take a quick tour!</p>
<h4><strong>Tokyo Cabinet Highlights</strong></h4>
<p>Speed and efficiency are two consistent themes for Tokyo Cabinet. <a href="http://tokyocabinet.sourceforge.net/benchmark.pdf">Benchmarks show</a> that it only takes <strong>0.7 seconds to store 1 million records in the regular hash table and 1.6 seconds for the B-Tree engine</strong>. To achieve this, the overhead per record is kept at as low as possible, ranging between 5 and 20 bytes: 5 bytes for B-Tree, 16-20 bytes for the Hash-table engine. And if small overhead is not enough, Tokyo Cabinet also has <a href="http://tokyocabinet.sourceforge.net/spex-en.html#features">native support for Lempel-Ziv or BWT compression</a> algorithms, which can reduce your database to ~25% of it's size (typical text compression rate). Oh, and did I mention that it is thread safe (uses pthreads) and offers row-level locking?</p>
<p>For a full feature list, take a look at the <a href="http://www.scribd.com/doc/12016121/Tokyo-Cabinet-and-Tokyo-Tyrant-Presentation">overview presentation</a>, as well as the <a href="http://tokyocabinet.sourceforge.net/spex-en.html#features">project specifications</a>. However, while the technical details are nothing short of impressive, it is the collection of underling database engines that really makes the project stand out!</p>
<h4><strong>Hash and B-Tree Database Engines</strong></h4>
<p><img align="left" style="margin-right: 1em;" src="http://www.igvita.com/posts/09/tokyo-b-tree.png"/>Hash database engine is a direct competitor to <a href="http://www.oracle.com/technology/products/berkeley-db/db/index.html">BerkeleyDB</a>, and <a href="http://www.metabrew.com/article/anti-rdbms-a-list-of-distributed-key-value-stores/">other key-value stores</a>: one key, one value, no duplicates, and crazy fast. However, being faster is one thing, and innovating on the idea is another, and this is where other Tokyo Cabinet engines break away from the pack.</p>
<p>Functionally, the B-Tree database engine is equivalent to the Hash database. However, because of its underlying structure, the keys can be ordered via a user-specified function, which in turn allows us to do prefix and range matching on a key, as well as, traverse the entries in order. (Think <a href="http://www.igvita.com/2009/02/04/ruby-19-internals-ordered-hash/">Ruby 1.9 ordered hash</a>). Let's look at some examples:</p>
<div style=" background:white;" id=8662_1>
<pre class="ruby"><span style="color:#CC0066; font-weight:bold;">require</span> <span style="color:#996600;">&quot;rubygems&quot;</span>
<span style="color:#CC0066; font-weight:bold;">require</span> <span style="color:#996600;">&quot;tokyocabinet&quot;</span>
&nbsp;
<span style="color:#9966CC; font-weight:bold;">include</span> TokyoCabinet
&nbsp;
bdb = BDB::new  <span style="color:#008000; font-style:italic;"># B-Tree database; keys may have multiple values</span>
bdb.<span style="color:#CC0066; font-weight:bold;">open</span><span style="color:#006600; font-weight:bold;">&#40;</span><span style="color:#996600;">&quot;casket.bdb&quot;</span>, <span style="color:#6666ff; font-weight:bold;">BDB::OWRITER</span> | <span style="color:#6666ff; font-weight:bold;">BDB::OCREAT</span><span style="color:#006600; font-weight:bold;">&#41;</span>
&nbsp;
<span style="color:#008000; font-style:italic;"># store records in the database, allowing duplicates</span>
bdb.<span style="color:#9900CC;">putdup</span><span style="color:#006600; font-weight:bold;">&#40;</span><span style="color:#996600;">&quot;key1&quot;</span>, <span style="color:#996600;">&quot;value1&quot;</span><span style="color:#006600; font-weight:bold;">&#41;</span>
bdb.<span style="color:#9900CC;">putdup</span><span style="color:#006600; font-weight:bold;">&#40;</span><span style="color:#996600;">&quot;key1&quot;</span>, <span style="color:#996600;">&quot;value2&quot;</span><span style="color:#006600; font-weight:bold;">&#41;</span>
bdb.<span style="color:#9900CC;">put</span><span style="color:#006600; font-weight:bold;">&#40;</span><span style="color:#996600;">&quot;key2&quot;</span>, <span style="color:#996600;">&quot;value3&quot;</span><span style="color:#006600; font-weight:bold;">&#41;</span>
bdb.<span style="color:#9900CC;">put</span><span style="color:#006600; font-weight:bold;">&#40;</span><span style="color:#996600;">&quot;key3&quot;</span>, <span style="color:#996600;">&quot;value4&quot;</span><span style="color:#006600; font-weight:bold;">&#41;</span>
&nbsp;
<span style="color:#008000; font-style:italic;"># retrieve all values</span>
<span style="color:#CC0066; font-weight:bold;">p</span> bdb.<span style="color:#9900CC;">getlist</span><span style="color:#006600; font-weight:bold;">&#40;</span><span style="color:#996600;">&quot;key1&quot;</span><span style="color:#006600; font-weight:bold;">&#41;</span>
<span style="color:#008000; font-style:italic;"># =&gt; [&quot;value1&quot;, &quot;value2&quot;]</span>
&nbsp;
<span style="color:#008000; font-style:italic;"># range query, find all matching keys</span>
<span style="color:#CC0066; font-weight:bold;">p</span> bdb.<span style="color:#9900CC;">range</span><span style="color:#006600; font-weight:bold;">&#40;</span><span style="color:#996600;">&quot;key1&quot;</span>, <span style="color:#0000FF; font-weight:bold;">true</span>, <span style="color:#996600;">&quot;key3&quot;</span>, <span style="color:#0000FF; font-weight:bold;">true</span><span style="color:#006600; font-weight:bold;">&#41;</span>
<span style="color:#008000; font-style:italic;"># =&gt; [&quot;key1&quot;, &quot;key2&quot;, &quot;key3&quot;]</span></pre>
</div>
<h4><strong>Fixed-length and Table Database Engines</strong></h4>
<p>Next up, we have the 'fixed length' engine, which is best understood as a simple array. There is absolutely no hashing and access is done via natural number keys, which also means no key overhead. If you're looking for speed, you can't get any faster.</p>
<p>Saving best for last, we have the Table engine, which mimics a relational database, except that it requires no predefined schema (in this, it is a close cousin to <a href="http://couchdb.apache.org/">CouchDB</a>, which allows arbitrary properties on any object). Each record still has a primary key, but we are allowed to declare arbitrary indexes on our columns, and even perform queries on them:</p>
<div style=" background:white;" id=8662_2>
<pre class="ruby"><span style="color:#CC0066; font-weight:bold;">require</span> <span style="color:#996600;">&quot;rubygems&quot;</span>
<span style="color:#CC0066; font-weight:bold;">require</span> <span style="color:#996600;">&quot;rufus/tokyo/cabinet/table&quot;</span>
&nbsp;
t = <span style="color:#6666ff; font-weight:bold;">Rufus::Tokyo::Table</span>.<span style="color:#9900CC;">new</span><span style="color:#006600; font-weight:bold;">&#40;</span><span style="color:#996600;">'table.tdb'</span>, <span style="color:#ff3333; font-weight:bold;">:create</span>, <span style="color:#ff3333; font-weight:bold;">:write</span><span style="color:#006600; font-weight:bold;">&#41;</span>
&nbsp;
<span style="color:#008000; font-style:italic;"># populate table with arbitrary data (no schema!)</span>
t<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#996600;">'pk0'</span><span style="color:#006600; font-weight:bold;">&#93;</span> = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#996600;">'name'</span> =&gt; <span style="color:#996600;">'alfred'</span>, <span style="color:#996600;">'age'</span> =&gt; <span style="color:#996600;">'22'</span>, <span style="color:#996600;">'sex'</span> =&gt; <span style="color:#996600;">'male'</span> <span style="color:#006600; font-weight:bold;">&#125;</span>
t<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#996600;">'pk1'</span><span style="color:#006600; font-weight:bold;">&#93;</span> = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#996600;">'name'</span> =&gt; <span style="color:#996600;">'bob'</span>, <span style="color:#996600;">'age'</span> =&gt; <span style="color:#996600;">'18'</span> <span style="color:#006600; font-weight:bold;">&#125;</span>
t<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#996600;">'pk2'</span><span style="color:#006600; font-weight:bold;">&#93;</span> = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#996600;">'name'</span> =&gt; <span style="color:#996600;">'charly'</span>, <span style="color:#996600;">'age'</span> =&gt; <span style="color:#996600;">'45'</span>, <span style="color:#996600;">'nickname'</span> =&gt; <span style="color:#996600;">'charlie'</span> <span style="color:#006600; font-weight:bold;">&#125;</span>
t<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#996600;">'pk3'</span><span style="color:#006600; font-weight:bold;">&#93;</span> = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#996600;">'name'</span> =&gt; <span style="color:#996600;">'doug'</span>, <span style="color:#996600;">'age'</span> =&gt; <span style="color:#996600;">'77'</span> <span style="color:#006600; font-weight:bold;">&#125;</span>
t<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#996600;">'pk4'</span><span style="color:#006600; font-weight:bold;">&#93;</span> = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#996600;">'name'</span> =&gt; <span style="color:#996600;">'ephrem'</span>, <span style="color:#996600;">'age'</span> =&gt; <span style="color:#996600;">'32'</span> <span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
<span style="color:#008000; font-style:italic;"># query table for age &gt;= 32</span>
<span style="color:#CC0066; font-weight:bold;">p</span> t.<span style="color:#9900CC;">query</span> <span style="color:#006600; font-weight:bold;">&#123;</span> |q|
  q.<span style="color:#9900CC;">add_condition</span> <span style="color:#996600;">'age'</span>, <span style="color:#ff3333; font-weight:bold;">:numge</span>, <span style="color:#996600;">'32'</span>
  q.<span style="color:#9900CC;">order_by</span> <span style="color:#996600;">'age'</span>
<span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
<span style="color:#008000; font-style:italic;"># =&gt; [ {&quot;name&quot;=&gt;&quot;ephrem&quot;, :pk=&gt;&quot;pk4&quot;, &quot;age&quot;=&gt;&quot;32&quot;},</span>
<span style="color:#008000; font-style:italic;">#      {&quot;name&quot;=&gt;&quot;charly&quot;, :pk=&gt;&quot;pk2&quot;, &quot;nickname&quot;=&gt;&quot;charlie&quot;, &quot;age&quot;=&gt;&quot;45&quot;},</span>
<span style="color:#008000; font-style:italic;">#      {&quot;name&quot;=&gt;&quot;doug&quot;, :pk=&gt;&quot;pk3&quot;, &quot;age&quot;=&gt;&quot;77&quot;} ]</span>
&nbsp;
t.<span style="color:#9900CC;">close</span></pre>
</div>
<h4><strong>Tokyo Tyrant: Network Interface </strong></h4>
<p>While Tokyo Cabinet is best thought of as an API to the native database routines, you'll be happy to know that you can, in fact, run Tokyo Cabinet in stand alone mode with the help of <a href="http://tokyocabinet.sourceforge.net/tyrantdoc/">Tokyo Tyrant</a> - a high concurrency network interface to the underlying database. <a href="http://tokyocabinet.sourceforge.net/tyrantdoc/#tutorial">Backup, replication, and failover</a> are all part of the package.</p>
<p>Ah, but what about the supporting access libraries, right? Well, there is an <a href="http://krow.livejournal.com/562305.html">alpha MySQL Engine by Brian Krow</a>, and it also understands the <a href="http://tokyocabinet.sourceforge.net/tyrantdoc/#tutorial">memcached protocol</a>. Specify the Tokyo Tyrant server IP as your memcached server, and you're up and ready to go. And if that's not enough, just to seal the deal, here is my favorite: it is also fully RESTful!</p>
<div style=" background:white;" id=8662_3>
<pre class="ruby"><span style="color:#CC0066; font-weight:bold;">require</span> <span style="color:#996600;">&quot;rubygems&quot;</span>
<span style="color:#CC0066; font-weight:bold;">require</span> <span style="color:#996600;">&quot;rest_client&quot;</span>
&nbsp;
<span style="color:#008000; font-style:italic;"># Interacting with TokyoTyrant via HTTP!</span>
db = <span style="color:#6666ff; font-weight:bold;">RestClient::Resource</span>.<span style="color:#9900CC;">new</span><span style="color:#006600; font-weight:bold;">&#40;</span><span style="color:#996600;">&quot;http://localhost:1978&quot;</span><span style="color:#006600; font-weight:bold;">&#41;</span>
&nbsp;
db<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#996600;">&quot;key&quot;</span><span style="color:#006600; font-weight:bold;">&#93;</span>.<span style="color:#9900CC;">put</span> <span style="color:#996600;">&quot;value 1&quot;</span>  <span style="color:#008000; font-style:italic;"># insert via HTTP</span>
db<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#996600;">&quot;key&quot;</span><span style="color:#006600; font-weight:bold;">&#93;</span>.<span style="color:#9900CC;">put</span> <span style="color:#996600;">&quot;value 2&quot;</span>  <span style="color:#008000; font-style:italic;"># update via HTTP</span>
&nbsp;
<span style="color:#CC0066; font-weight:bold;">puts</span> db<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#996600;">&quot;key&quot;</span><span style="color:#006600; font-weight:bold;">&#93;</span>.<span style="color:#9900CC;">get</span>       <span style="color:#008000; font-style:italic;"># get via HTTP</span>
<span style="color:#008000; font-style:italic;"># =&gt; &quot;value 2&quot;</span>
&nbsp;
db<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#996600;">&quot;key&quot;</span><span style="color:#006600; font-weight:bold;">&#93;</span>.<span style="color:#9900CC;">delete</span>         <span style="color:#008000; font-style:italic;"># delete via HTTP</span>
<span style="color:#CC0066; font-weight:bold;">puts</span> db<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#996600;">&quot;key&quot;</span><span style="color:#006600; font-weight:bold;">&#93;</span>.<span style="color:#9900CC;">get</span> <span style="color:#9966CC; font-weight:bold;">rescue</span> <span style="color:#6666ff; font-weight:bold;">RestClient::ResourceNotFound</span></pre>
</div>
<p><div class='download-link'>
							<a href='http://www.igvita.com/download.php?file=http://www.igvita.com/downloads/tokyo-rb.zip'><img alt='Download' class='leftalign' src='http://www.igvita.com/wp-content/plugins/dBeautifier/icons/downloads.png' /></a>
							<h4>
								<a href='http://www.igvita.com/download.php?file=http://www.igvita.com/downloads/tokyo-rb.zip'>tokyo-rb.zip (Examples source)</a>
							</h4><p>Downloads: 692 File Size: 1.3 KB </p>
						</div></p>
<h4><strong>Performance & Ruby Libraries</strong></h4>
<p><img align="left" style="margin-right: 1em;" src="http://www.igvita.com/posts/09/tokyo-benchmark.png"/>Excluding the memcached and HTTP access methods, there are currently three Ruby alternatives methods for interacting with Tokyo Cabinet and Tokyo Tyrant. Hirabayashi-san, the author of the project, is actively maintaining the <a href="http://tokyocabinet.sourceforge.net/rubypkg/">Tokyo Cabinet</a> (<a href="http://tokyocabinet.sourceforge.net/rubydoc/">rdoc</a>) and <a href="http://tokyocabinet.sourceforge.net/tyrantpkg/">Tokyo Tyrant</a> (<a href="http://tokyocabinet.sourceforge.net/tyrantrubydoc/">rdoc</a>) libraries. <a href="http://jmettraux.wordpress.com/2009/02/13/rufus-tokyo-015-hail-to-the-tyrant/">John Mettraux is working on a FFI-backed</a>, and arguably much more Ruby friendly version: <a href="http://github.com/jmettraux/rufus-tokyo/tree/master">rufus-tokyo</a>, and Makoto Inoue has a prototype <a href="http://github.com/makoto/dm-tokyo-cabinet-adapter/tree/master">DataMapper adapter</a>.</p>
<p>Not surprisingly, the FFI bindings in rufus-tokyo <a href="http://www.igvita.com/2009/01/15/bridging-mri-jruby-rubinius-with-ffi/">can't keep up with the native interface</a> (benchmarks for inserting, reading, and scanning 1 million records), but relatively speaking, the gem is still very fast and offers the added benefits of portability across all Ruby implementations and a much friendlier interface.</p>
<p>Still not convinced? Take a look at the source code, it's a pleasure to work with.</p>
<p class="download">Extending Tokyo Cabinet with Lua: <a href="http://www.infoq.com/presentations/grigorik-tokyo-cabinet-recipes">Video from FutureRuby '09</a> / <a href="http://www.igvita.com/2009/07/13/extending-tokyo-cabinet-db-with-lua/">Slides</a> / <a href="http://github.com/igrigorik/tokyo-recipes">Code</a></p>
			</div>
			<hr class="hide" />
			<div class="secondary">
	
			
		<div style="margin-bottom:15px">
			<a href="http://feeds.igvita.com/igvita" onclick="_gaq.push(['_trackEvent', 'RSS', 'subscribe']"><img src="http://www.igvita.com/wp-content/themes/igvita/images/rss-icon.png" style="float:left; margin-right: 5px;"></a>
			<span style="font-weight:bold; font-size:16px"><a class="follower-link" href="http://feeds.igvita.com/igvita" onclick="_gaq.push(['_trackEvent', 'RSS', 'subscribe']">8652 readers</a></span><br />
			<span style=""><a class="follower-link" style="color:#808080" href="http://feeds.igvita.com/igvita" onclick="_gaq.push(['_trackEvent', 'RSS', 'subscribe']">subscribe via RSS</a></span>
		</div>
		
		<div style="margin-bottom:15px">
			<a href="http://www.twitter.com/igrigorik" onclick="_gaq.push(['_trackEvent', 'Twitter', 'subscribe']"><img src="http://www.igvita.com/wp-content/themes/igvita/images/twitter-icon.png" style="float:left; margin-right: 5px;"></a>
			<span style="font-weight:bold; font-size:16px"><a class="follower-link" href="http://www.twitter.com/igrigorik" onclick="_gaq.push(['_trackEvent', 'Twitter', 'subscribe']">5516 followers</a></span><br />
			<span style=""><a class="follower-link" rel="me" style="color:#808080" href="http://www.twitter.com/igrigorik" onclick="_gaq.push(['_trackEvent', 'Twitter', 'subscribe']">follow @igrigorik</a></span>
		</div>

		<div>
			<a href="http://www.github.com/igrigorik" onclick="_gaq.push(['_trackEvent', 'Github', 'subscribe']"><img src="http://www.igvita.com/wp-content/themes/igvita/images/github.png" style="float:left; margin-right: 5px;"></a>
			<span style="font-weight:bold; font-size:16px"><a class="follower-link" href="http://www.github.com/igrigorik" onclick="_gaq.push(['_trackEvent', 'Github', 'subscribe']">722
 followers</a></span><br />
			<span style=""><a class="follower-link" rel="me" style="color:#808080" href="http://www.github.com/igrigorik" onclick="_gaq.push(['_trackEvent', 'Github', 'subscribe']">follow on github</a></span>
		</div>
	<br />
	<br />

				<h2>About this entry</h2>
				<div class="featured">
					<dl class="both">
						<dt>Published:</dt>
						<dd>13.02.09 / 11am</dd>
					</dl>
					<dl>
						<dt>Category:</dt>
						<dd><a href="http://www.igvita.com/category/agile/" title="View all posts in Agile Methods" rel="category tag">Agile Methods</a>,  <a href="http://www.igvita.com/category/databases/" title="View all posts in Databases" rel="category tag">Databases</a></dd>
					</dl>
					<dl>
						<dt>Tagged:</dt>
						<dd><a href="http://www.igvita.com/tag/db/" rel="tag">db</a>, <a href="http://www.igvita.com/tag/ruby/" rel="tag">Ruby</a>, <a href="http://www.igvita.com/tag/tokyocabinet/" rel="tag">tokyocabinet</a></dd>
          </dl>
					<dl>
						<dt>Print:</dt>
						<dd>
							<script src="http://cdn.printfriendly.com/printfriendly.js" type="text/javascript"></script>
							<img src="http://cdn.printfriendly.com/pf-pdf-icon.gif" style="vertical-align:middle;" />
							<a href="http://www.printfriendly.com" id="pfLink" onclick="window.print(); return false;">PDF & Email friendly</a>
						</dd>
          </dl>
										<br />
          <br />
      
      					
	 <h2> Related Posts</h2>
   <ul class="dates">
       <li class="inverse"><a href="http://www.igvita.com/2009/07/13/extending-tokyo-cabinet-db-with-lua/" class="inverse" rel="bookmark" title="Permanent Link: Extending Tokyo Cabinet DB with Lua"><span class="date-white">13.07</span>  Extending Tokyo Cabinet DB with Lua</a></li><li class="inverse"><a href="http://www.igvita.com/about/" class="inverse" rel="bookmark" title="Permanent Link: About"><span class="date-white">02.05</span>  About</a></li><li class="inverse"><a href="http://www.igvita.com/2009/12/07/future-of-rdbms-is-ram-clouds-ssd/" class="inverse" rel="bookmark" title="Permanent Link: Future of RDBMS is RAM Clouds &#038; SSD"><span class="date-white">07.12</span>  Future of RDBMS is RAM Clouds &#038; SSD</a></li><li class="inverse"><a href="http://www.igvita.com/2007/11/15/testing-rddb-restful-ruby-database/" class="inverse" rel="bookmark" title="Permanent Link: Testing RDDB: RESTful Ruby Database"><span class="date-white">15.11</span>  Testing RDDB: RESTful Ruby Database</a></li><li class="inverse"><a href="http://www.igvita.com/2006/11/16/tutorial-competition-at-graphics-world/" class="inverse" rel="bookmark" title="Permanent Link: Tutorial competition at Graphics World!"><span class="date-white">16.11</span>  Tutorial competition at Graphics World!</a></li>    </ul>
	  <br />
    <ul id="widget">
    <li id="postrank" class="widget widget_postrank"><div class="postrank-widget theDarkSide">
<script type="text/javascript" src="http://api.postrank.com/static/widget-v2.js"></script>
<script type="text/javascript">
//<![CDATA[
	var options = {
		"feed_hash": "421df2d86ab95100de7dcc2e247a08ab", // Unique feed identifier
		"num": 6, // Number of top posts to display
		"theme": "theDarkSide", // blueAndBlue, blackAndGray
		"hasLink": true,
		"contextual": true
	}   
	new PostRankWidget(options);
//]]>
</script>
<div class="powered-by-postrank-wrapper">
<div class="powered-by-postrank">
<a href="http://www.postrank.com/?utm_source=topposts&utm_medium=widget&utm_content=topposts&utm_campaign=pr-1"><span>Powered by Postrank</span></a>
</div>
<div class="pr_bottomCornerSet"><div class="pr_clearBottomLeft"></div><div class="pr_solidSpecialMiddle"></div><div class="pr_clearBottomRight"></div></div>
</div>
</div>


</li>
  </ul>




 
				</div>
			</div>
			<div class="clear"></div>
		</div>
	</div>
	<!-- [END] #primary -->
	
	<hr class="hide" />
	<div id="secondary">
		<div class="inside">
			
							<div class="comment-head">
					<h2>70 Comments</h2>
					<span class="details"><a href='http://www.igvita.com/2009/02/13/tokyo-cabinet-beyond-key-value-store/feed/'>comments rss</a> | <a href="http://www.igvita.com/2009/02/13/tokyo-cabinet-beyond-key-value-store/trackback/">trackback uri</a> </span>
				</div>
						
			
<!-- You can start editing here. -->


	<ol id="comments">

			<li id="comment-169027">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/97d540da0aee796ba07e9420099552b4?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>Ken</span>
				<span class="date">13.02.09 / 12pm</span>
			</cite>
			<div class="content">
								<p>Uh, did you just use the Flash plugin for every single header?  :-)</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169028">
			<cite>
								<span class="author"><a href='http://mentalmissing.com' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/6b8a9192d85a59d2caec9cfd58bc4f9a?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://mentalmissing.com' rel='external nofollow'>Justin</a></span>
				<span class="date">13.02.09 / 12pm</span>
			</cite>
			<div class="content">
								<p>Nice article! jmettraux on Github has created rufus-tokyo which implements a few of these so far using Ruby FFI. He&#8217;s aiming for support across the board&#8230; JRuby, 1.8 and 1.9. I might be adding Rubinius support as soon as the stackfull branch is merged back in and their FFI lib is updated with that stuff.</p>
<p>I&#8217;m also working on a dm-tyrant-adapter which will utilize the table based API of Cabinet through a Tyrant connection. Hoping to have an early release at the end of this weekend.</p>
<p>Speed so far is looking good so far for a FFI based gem, which John has been benchmarking the entire time.</p>
<p>GREAT ARTICLE! The more people turned onto this stuff the better!</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169044">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/821395fe70906c8290df7f18ac4ac6cf?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>rick</span>
				<span class="date">13.02.09 / 1pm</span>
			</cite>
			<div class="content">
								<p>ken: using flash for headers is a common technique (called <a href="http://www.mikeindustries.com/blog/sifr/" rel="nofollow">sifr</a>) when you want to use pretty fonts that most people might not have installed.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169052">
			<cite>
								<span class="author"><a href='http://smartflix.com/profiles/200001' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/83c267ce189448935030b2303a49d3ff?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://smartflix.com/profiles/200001' rel='external nofollow'>TJIC from SmartFlix</a></span>
				<span class="date">13.02.09 / 2pm</span>
			</cite>
			<div class="content">
								<p>Pretty slick!</p>
<p>Has anyone done work with getting ActiveRecord to sit atop this?</p>
<p>That blazing speed could be quite useful&#8230;</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169058">
			<cite>
								<span class="author"><a href='http://people.csail.mit.edu/eob' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/6fd2872dee80ae03ccd799dd24572748?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://people.csail.mit.edu/eob' rel='external nofollow'>Ted Benson</a></span>
				<span class="date">13.02.09 / 2pm</span>
			</cite>
			<div class="content">
								<p>Thanks for the writeup &#8212; it looks like an interesting setup. Is Mixi actually running on top of this, or is it still a prototype for them?</p>
<p>@TJIC &#8212; Hash-stores are completely different beasts than relational DBs.. They&#8217;re used for (and good at) different things. You might not want to just throw ActiveRecord on top of this and use it like you&#8217;re used to..</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169059">
			<cite>
								<span class="author"><a href='http://mentalmissing.com' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/6b8a9192d85a59d2caec9cfd58bc4f9a?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://mentalmissing.com' rel='external nofollow'>Justin</a></span>
				<span class="date">13.02.09 / 3pm</span>
			</cite>
			<div class="content">
								<p>@Ted &amp; @TJIC ActiveRecord is built for SQL, so you probably won&#8217;t ever see it used with this. DataMapper on the other hand should gladly adapt to using Cabinet Tables type databases. Though you are still not going to use it the same way as a relational backend.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169062">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/a17f0025641b4be419a6cd3845e55dd2?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>Ilya Grigorik</span>
				<span class="date">13.02.09 / 3pm</span>
			</cite>
			<div class="content">
								<p>Ted, from my research, TC is a production database at mixi and is being used for a number of different applications: storage, caching layer, etc. </p>
<p>Ken, yes, the headers are Flash, done with sifr. ;)</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169066">
			<cite>
								<span class="author"><a href='http://nickelcode.com' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/20196c9dc97267632ce6e6b778361eae?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://nickelcode.com' rel='external nofollow'>John Bender</a></span>
				<span class="date">13.02.09 / 3pm</span>
			</cite>
			<div class="content">
								<p>&#8220;In fact, given the maturity of the project, it is surprising how little information is available on it outside of Japan.&#8221;</p>
<p>Quite right. Thanks for filling us in.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169103">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/27d842adc36d4b835b164dc2606a5d17?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>Paul Smith</span>
				<span class="date">13.02.09 / 5pm</span>
			</cite>
			<div class="content">
								<p>I was looking at the benchmarks here: <a href="http://gist.github.com/54371" rel="nofollow">http://gist.github.com/54371</a></p>
<p>and it looks like the write/insertion speed is blazing fast, but it looks like reads could be a lot slower than MySQL/Postgres on bigger tables. Is that true or did I read it wrong? Just trying to gather some info :p</p>
<p>Thanks for filling us all in</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169114">
			<cite>
								<span class="author"><a href='http://mentalmissing.com' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/6b8a9192d85a59d2caec9cfd58bc4f9a?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://mentalmissing.com' rel='external nofollow'>Justin</a></span>
				<span class="date">13.02.09 / 5pm</span>
			</cite>
			<div class="content">
								<p>@Paul thanks for validating the last paragraph of this article</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169120">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/27d842adc36d4b835b164dc2606a5d17?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>Paul Smith</span>
				<span class="date">13.02.09 / 6pm</span>
			</cite>
			<div class="content">
								<p>I&#8217;m not sure what you&#8217;re talking about. It says the Ruby bindings make it slower than native, but it says nothing about reads being much slower than something like MySQL. Unless I missed something on the second read through.</p>
<p>I just wanted to make sure I was reading the benchmarks correctly, because this article doesn&#8217;t mention much about reads on the table engine, just inserts being fast.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169124">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/27d842adc36d4b835b164dc2606a5d17?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>Paul Smith</span>
				<span class="date">13.02.09 / 6pm</span>
			</cite>
			<div class="content">
								<p>and I very well could have misread/missed something :p It&#8217;s happened before.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169149">
			<cite>
								<span class="author"><a href='http://www.themomorohoax.com' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/ff937b6907db49432c980f2b6a5c7e71?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://www.themomorohoax.com' rel='external nofollow'>Mischa</a></span>
				<span class="date">13.02.09 / 7pm</span>
			</cite>
			<div class="content">
								<p>Sweet!</p>
<p>I wonder how long until we can use in production with rails.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169174">
			<cite>
								<span class="author"><a href='http://www.squarecog.com' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/7cfa823e92df71d57570952dff52ed2a?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://www.squarecog.com' rel='external nofollow'>Dmitriy</a></span>
				<span class="date">13.02.09 / 8pm</span>
			</cite>
			<div class="content">
								<p>Ilya,<br />
That&#8217;s really interesting and useful! I look forward to checking out the details.. One little thing &#8212; BerkeleyDB supports a B-Tree layout and range queries; I might have to put the two to a speed test. Any ideas for a fair benchmark?  The schema-less DB engine is intriguing.  You can do this with BerkeleyDBs, but it requires a lot more work.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169191">
			<cite>
								<span class="author"><a href='http://paglo.com' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/0d546d6900af31be5e371683c4f0fee9?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://paglo.com' rel='external nofollow'>Chris</a></span>
				<span class="date">13.02.09 / 9pm</span>
			</cite>
			<div class="content">
								<p>It looks to me like the benchmark code at <a href="http://gist.github.com/54371" rel="nofollow">http://gist.github.com/54371</a> has a significant flaw. The MySQL inserts should be done within a transaction. I suspect that wrapping the inserts in a transaction will give a couple of orders of magnitude speed up. Otherwise the MySQL code is penalized by the constant disk syncs which are necessary.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169204">
			<cite>
								<span class="author"><a href='http://jmettraux.wordpress.com' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/8d96626e52beb1ff90f57a8e189e1e6f?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://jmettraux.wordpress.com' rel='external nofollow'>John</a></span>
				<span class="date">13.02.09 / 9pm</span>
			</cite>
			<div class="content">
								<p>@Chris the benchmark at <a href="http://gist.github.com/54371" rel="nofollow">http://gist.github.com/54371</a> is very naive, you&#8217;re right. It was only meant to get an initial idea. I will make that clearer in the post. Thanks.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169259">
			<cite>
								<span class="author"><a href='http://donghaima.wordpress.com/2009/02/14/links-for-2009-02-13/' rel='external nofollow' class='url'>links for 2009-02-13 &laquo; Donghai Ma</a></span>
				<span class="date">14.02.09 / 12am</span>
			</cite>
			<div class="content">
								<p>[...] Tokyo Cabinet: Beyond Key-Value Store - igvita.com (tags: programming cool database architecture ruby storage memcached databases tokyo tokyocabinet) [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169355">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/27d842adc36d4b835b164dc2606a5d17?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>Paul Smith</span>
				<span class="date">14.02.09 / 4am</span>
			</cite>
			<div class="content">
								<p>@Chris, John At the same time wrapping it in a transaction might not be the best way to go. I think it would be more helpful to see how many inserts the DBs can handle without transactions. A lot of inserts won&#8217;t be transactions and knowing what it can do is helpful. I don&#8217;t know if this makes sense, but basically a lot of inserts are just one or two inserts at a time, but they are done by many different users (in rails) so they wouldn&#8217;t be lumped together in one giant transaction. Anyway, both a transaction benchmark and a benchmark w/o transactions are useful.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169382">
			<cite>
								<span class="author"><a href='http://www.econectados.com/2009/02/el-futuro-de-las-bases-de-datos/' rel='external nofollow' class='url'>El futuro de las bases de datos &raquo; eConectados</a></span>
				<span class="date">14.02.09 / 5am</span>
			</cite>
			<div class="content">
								<p>[...] Tokyo Cabinet, hacen una buena explicación de cómo funciona y sus características. Está desarrollado por Mixi (el Facebook japonés). Página oficial. [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169480">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/8ae9585d6885a9c1d4afb04074fb2586?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>ernesto che</span>
				<span class="date">14.02.09 / 10am</span>
			</cite>
			<div class="content">
								<p>does it scale well? i.e. does it run &#8220;in the cloud&#8221; with hundreds of instances?</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169492">
			<cite>
								<span class="author"><a href='http://blog.hehejo.de/939/tokyo-cabinet/' rel='external nofollow' class='url'>Tokyo Cabinet | *Jahu* im Blog. Ich grüße dich!</a></span>
				<span class="date">14.02.09 / 11am</span>
			</cite>
			<div class="content">
								<p>[...] Tokyo Cabinet: Tokyo Cabinet via igvita.com. [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169500">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/a17f0025641b4be419a6cd3845e55dd2?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>Ilya Grigorik</span>
				<span class="date">14.02.09 / 11am</span>
			</cite>
			<div class="content">
								<p>Paul, I think I may have inadvertently confused some of the readers with my language. I haven&#8217;t benchmarked the native C libraries against Ruby, what I wanted to say was that John&#8217;s gem (rufus-tokyo), which uses FFI, is ~2x slower when compared to the MRI bindings developed by Hirabayashi-san. Sorry about that. ;)</p>
<p>On that note though, I do have some benchmarks which I didn&#8217;t share in the post: <a href="http://gist.github.com/64391" rel="nofollow">http://gist.github.com/64391</a></p>
<p>Dmitriy, I didn&#8217;t realize BerkeleyDB had B-Tree support - that&#8217;s great news! If you can, I&#8217;d love to see some benchmarks against TC. As a baseline, how about: insert, random get, and a subrange select and iterate. See my gist above for TC numbers.</p>
<p>Ernesto, TC is not a panacea for scalability either. It does have master-master replication and can be scripted via Lua, which in itself is pretty hot. All of the same techniques: sharding datasets, load balancing, avoiding hotspots still apply.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169587">
			<cite>
								<span class="author"><a href='http://inouemak.wordpress.com' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/1eecfce54b4f902784d046328935efd4?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://inouemak.wordpress.com' rel='external nofollow'>Makoto</a></span>
				<span class="date">14.02.09 / 3pm</span>
			</cite>
			<div class="content">
								<p>@Ilya</p>
<p>Thank you for mentioning my tiny project about datamapper adapter, though I haven&#8217;t done much development lately. As a Japanese, I am glad that many other people are interested in Tokyo Cabinet and working on libraries. It&#8217;s too bad not much English info available. Hirabayashi san has support forum within Mixi (and I asked bunch of questions there), which is closed network, so you can not even use google translation..  Anyway, great article!!</p>
<p>@justin.<br />
The below url says rufus-tokyo is now integrated into Moneta, which does support DataMapper. </p>
<p><a href="http://jmettraux.wordpress.com/2009/02/13/rufus-tokyo-015-hail-to-the-tyrant/" rel="nofollow">http://jmettraux.wordpress.com/2009/02/13/rufus-tokyo-015-hail-to-the-tyrant/</a></p>
<p>Does it mean my dm-tokyo-cabinet-adapter and your dm-tyrant-adapter are redundant to what Moneta offers?</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169784">
			<cite>
								<span class="author"><a href='http://seventytwo.co.uk' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/95d8510ef03567cd7d014d4790116b0d?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://seventytwo.co.uk' rel='external nofollow'>Alistair Holt</a></span>
				<span class="date">15.02.09 / 6am</span>
			</cite>
			<div class="content">
								<p>Great article. I&#8217;ve been researching key/value stores a lot and this looks really good. The Datamapper + Tokyo Cabinet combination sounds very nice.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169795">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/44ea9faa70518170a73202b693bcc11a?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>joe</span>
				<span class="date">15.02.09 / 7am</span>
			</cite>
			<div class="content">
								<p>I&#8217;ve noticed that when you start adding more than 3mm records, tokyo cabinet slows down exponentially for inserts.  For my test, i&#8217;m using a 64 byte string as the key and using the hash datastore.  i want to add 100 million records, but it would take days to complete at the current rate.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169804">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/44ea9faa70518170a73202b693bcc11a?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>joe</span>
				<span class="date">15.02.09 / 8am</span>
			</cite>
			<div class="content">
								<p>ah, i figured out the trick to speeding up inserts for large recordsets:<br />
hdb.setxmsiz(500_000_000)<br />
speeds things up quite a bit.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169854">
			<cite>
								<span class="author"><a href='http://andy.edmonds.be/2009/02/links-for-2009-02-15/' rel='external nofollow' class='url'>andy.edmonds.be &rsaquo; links for 2009-02-15</a></span>
				<span class="date">15.02.09 / 12pm</span>
			</cite>
			<div class="content">
								<p>[...] Tokyo Cabinet: Beyond Key-Value Store - igvita.com (tags: database db storage tokyocabinet keyvalue properties)     This was written by andy. Posted on Monday, February 16, 2009, at 1:32 am. Filed under Delicious. Bookmark the permalink. Follow comments here with the RSS feed. Post a comment or leave a trackback. [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169928">
			<cite>
								<span class="author"><a href='http://zhesto.wordpress.com/2009/02/16/links-for-2009-02-15/' rel='external nofollow' class='url'>links for 2009-02-15 &laquo; Bloggitation</a></span>
				<span class="date">15.02.09 / 7pm</span>
			</cite>
			<div class="content">
								<p>[...] Tokyo Cabinet: Beyond Key-Value Store - igvita.com (tags: ruby programming database tokyocabinet) [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-169973">
			<cite>
								<span class="author"><a href='http://afreshcup.com/2009/02/16/double-shot-392/' rel='external nofollow' class='url'>Double Shot #392 &laquo; A Fresh Cup</a></span>
				<span class="date">15.02.09 / 11pm</span>
			</cite>
			<div class="content">
								<p>[...] Tokyo Cabinet: Beyond Key-Value Store - Yet another fancy-schmancy project for data storage from Ruby. [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-170102">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/28f936942d13ded5f24e8fee8ba0b1be?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>Lee</span>
				<span class="date">16.02.09 / 11am</span>
			</cite>
			<div class="content">
								<p>Any working PHP APIs there?</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-170253">
			<cite>
								<span class="author"><a href='http://r3sty.blogspot.com' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/7c3536f0ffdc51a02ec2c9d1d72165d5?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://r3sty.blogspot.com' rel='external nofollow'>ian</a></span>
				<span class="date">17.02.09 / 5am</span>
			</cite>
			<div class="content">
								<p>Thanks again for a great article, Ilya! This has really turned me onto TokyoCabinet. I&#8217;ve got some preliminary tests running very well right now.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-170637">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/a17f0025641b4be419a6cd3845e55dd2?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>Ilya Grigorik</span>
				<span class="date">18.02.09 / 2pm</span>
			</cite>
			<div class="content">
								<p>Lee, I&#8217;m not aware of any PHP libraries. Though if you find one, please do let me know!</p>
<p>Ian, would love to see the results of your benchmarks. I think a lot of people are interested in TC, but a little hesitant at this point due to lack of experience and practical advice with it. Any numbers you have would be great.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-170679">
			<cite>
								<span class="author"><a href='http://www.tokyomuslim.com' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/e8b65f4abc5c3ee559778f7715cbaef8?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://www.tokyomuslim.com' rel='external nofollow'>Jawaad Mahmood</a></span>
				<span class="date">18.02.09 / 6pm</span>
			</cite>
			<div class="content">
								<p>Hey,</p>
<p>I&#8217;m in the Tokyo area, bi-lingual, and I want to get involved in helping maintain this project.  Can anyone give me someone I can contact to see if I can help out?  I definitely would love to try to help make this available for PHP, if nothing else.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-171599">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/a17f0025641b4be419a6cd3845e55dd2?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>Ilya Grigorik</span>
				<span class="date">22.02.09 / 5am</span>
			</cite>
			<div class="content">
								<p>Jawaad, I imagine the best way to get in touch is to contact Hirabayashi-san directly, and a good place to start is his blog: <a href="http://alpha.mixi.co.jp/blog/?author=3" rel="nofollow">http://alpha.mixi.co.jp/blog/?author=3</a></p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-171679">
			<cite>
								<span class="author"><a href='http://inouemak.wordpress.com/' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/1eecfce54b4f902784d046328935efd4?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://inouemak.wordpress.com/' rel='external nofollow'>Makoto</a></span>
				<span class="date">22.02.09 / 10am</span>
			</cite>
			<div class="content">
								<p>Hi, Jawaad.</p>
<p>I know someone is working on php implementation for Tyrant.</p>
<p><a href="http://coderepos.org/share/browser/lang/php/Net_TokyoTyrant/trunk/Net" rel="nofollow">http://coderepos.org/share/browser/lang/php/Net_TokyoTyrant/trunk/Net</a></p>
<p>I haven&#8217;t tried it myself , as I am not php developer, so<br />
I am not sure if this is complete or not though.</p>
<p>I found the url at Mixi&#8217;s Tokyo Cabinet support forum, so I suggest you ask there directly.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-171921">
			<cite>
								<span class="author"><a href='http://dev.af83.com/veille-technologique/veille-technologique-x2-annonces-contenus-conferences-methodes-agilite-developpment-langages-editeurs-outils-bases-de-donnees-protocoles-bibliotheques-seo-ergo' rel='external nofollow' class='url'>Dev Blog AF83 &raquo; Blog Archive &raquo; Veille technologique (x2) : Annonces, Contenus, Conférences, Méthodes, Agilité, Développment, Langages, Editeurs, Outils, Bases de données, Protocoles, Bibliothèques, SEO, Ergonomie, etc.</a></span>
				<span class="date">23.02.09 / 7am</span>
			</cite>
			<div class="content">
								<p>[...] <a href="http://www.igvita.com/2009/02/13/tokyo-cabinet-beyond-key-value-store/" rel="nofollow">http://www.igvita.com/2009/02/13/tokyo-cabinet-beyond-key-value-store/</a> : Tokyo Cabinet est une base de données de type clé/valeur qui est très à la mode [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-172467">
			<cite>
								<span class="author"><a href='http://neobject.wordpress.com/2009/02/25/links-for-2009-02-24/' rel='external nofollow' class='url'>links for 2009-02-24 &laquo; Object neo = neo Object</a></span>
				<span class="date">24.02.09 / 4pm</span>
			</cite>
			<div class="content">
								<p>[...] Tokyo Cabinet: Beyond Key-Value Store - igvita.com (tags: tokyocabinet) [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-172855">
			<cite>
								<span class="author"><a href='http://rapd.wordpress.com/2009/02/26/tokyo-cabinet-another-key-value-database/' rel='external nofollow' class='url'>Tokyo Cabinet: Another Key-Value Database &laquo; Rudimentary Art of Programming &amp; Development</a></span>
				<span class="date">26.02.09 / 5pm</span>
			</cite>
			<div class="content">
								<p>[...] <a href="http://www.igvita.com/2009/02/13/tokyo-cabinet-beyond-key-value-store" rel="nofollow">http://www.igvita.com/2009/02/13/tokyo-cabinet-beyond-key-value-store</a> [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-172858">
			<cite>
								<span class="author"><a href='http://jmettraux.wordpress.com/2009/02/27/rufus-tokyo-018-rufusedo/' rel='external nofollow' class='url'>rufus-tokyo 0.1.8 (Rufus::Edo) &laquo; processi</a></span>
				<span class="date">26.02.09 / 6pm</span>
			</cite>
			<div class="content">
								<p>[...] Ilya Grigorik pointed out FFI is slower than extconf.rb classical Ruby to C bindings. I wanted to benefit from the speed of [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-175566">
			<cite>
								<span class="author"><a href='http://www.mikeperham.com/2009/03/08/tokyo-cabinet-vs-memcached/' rel='external nofollow' class='url'>Tokyo Cabinet vs Memcached</a></span>
				<span class="date">08.03.09 / 11am</span>
			</cite>
			<div class="content">
								<p>[...] Tokyo Cabinet bills itself as a next-generation DBM. Like BerkeleyDB, TC gives you low-level database operations and allows you to build your own very fast data access operations. Unlike BDB, TC has several functional layers on top of TC which provide network access, schema-less document-oriented storage (a la CouchDB) and supported bindings for many languages. This project is an infrastructure nerd&#8217;s dream! [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-184642">
			<cite>
								<span class="author"><a href='http://codemonkey.ravelry.com/2009/04/13/bucket-o-links-april-2009/' rel='external nofollow' class='url'>Bucket o&#8217; Links / April 2009 &lt; Code Monkey Island</a></span>
				<span class="date">13.04.09 / 3pm</span>
			</cite>
			<div class="content">
								<p>[...] Tokyo Cabinet and Tokyo Tyrant - a super fast key/value store and memcached-speaking server component (respectively). This came out of Japanese social network mixi.jp. Tokyo is file-backed but is nearly as fast as memcached for most needs. We&#8217;ve been using this for the last couple weeks to store long-lived cache data that is a little big for memcached. See also this presentation on Scribd and Plurk&#8217;s built-on-Tokyo LightCloud. [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-185220">
			<cite>
								<span class="author"><a href='http://elisehuard.wordpress.com/2009/04/15/distributed-key-value-stores/' rel='external nofollow' class='url'>Distributed key-value stores &laquo; Jabberwocky</a></span>
				<span class="date">15.04.09 / 4am</span>
			</cite>
			<div class="content">
								<p>[...] Grigorik, always a good reference, is a big fan of the more obscure (well, over here at least) Tokyo Cabinet. I&#8217;m about to try this out in my current project, so I&#8217;ll post later on to say how it [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-190330">
			<cite>
								<span class="author"><a href='http://www.marko.anastasov.name/blog/2009/05/02/know-your-storage-options-benchmarking-tokyo-cabinet/' rel='external nofollow' class='url'>Know Your Storage Options - Benchmarking Tokyo&nbsp;Cabinet &laquo; Markov Blog</a></span>
				<span class="date">02.05.09 / 4am</span>
			</cite>
			<div class="content">
								<p>[...] Tokyo Cabinet: Beyond Key-Value&nbsp;Store [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-192145">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/7e52e757d2940d0adfa8b49795f1bc74?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>Infospacer</span>
				<span class="date">07.05.09 / 9pm</span>
			</cite>
			<div class="content">
								<p>How do you think, is it appropriate to use TC for Neural Networks implementation?</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-192200">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/a17f0025641b4be419a6cd3845e55dd2?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>Ilya Grigorik</span>
				<span class="date">08.05.09 / 1am</span>
			</cite>
			<div class="content">
								<p>If you need a datastore for keeping track of all the nodes and connections, TC might be a great fit! Fast and easy to use.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-192249">
			<cite>
								<span class="author"><a href='http://www.gittr.com/index.php/archive/tokyo-cabinet-and-tyrant-for-ruby/' rel='external nofollow' class='url'>&raquo; Tokyo Cabinet and Tyrant for&nbsp;Ruby Gittr</a></span>
				<span class="date">08.05.09 / 12pm</span>
			</cite>
			<div class="content">
								<p>[...] Speed Comparison (At the bottom): http://www.igvita.com/2009/02/13/tokyo-cabinet-beyond-key-value-store/ [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-192441">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/7e52e757d2940d0adfa8b49795f1bc74?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>Infospacer</span>
				<span class="date">09.05.09 / 6pm</span>
			</cite>
			<div class="content">
								<p>to Ilya Grigorik</p>
<p>And if I wan to keep in TC also weights for connections and reajust them according to backpropogation rules?</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-192533">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/a17f0025641b4be419a6cd3845e55dd2?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>Ilya Grigorik</span>
				<span class="date">10.05.09 / 2am</span>
			</cite>
			<div class="content">
								<p>All depends on your data-model! I don&#8217;t see why you couldn&#8217;t model backpropagation weights via a hashbucket.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-193772">
			<cite>
								<span class="author"><a href='http://tagz.in/posts/6rg/comments/' rel='external nofollow' class='url'>Tagz | &quot;Tokyo Cabinet: Beyond Key-Value Store - igvita.com&quot; | Comments</a></span>
				<span class="date">16.05.09 / 12pm</span>
			</cite>
			<div class="content">
								<p>[...]               [upmod] [downmod]     Tokyo Cabinet: Beyond Key-Value Store - igvita.com  (igvita.com)    1 points posted 3 months ago by jeethu  tags programming database storage db [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-194375">
			<cite>
								<span class="author"><a href='http://24.183.55.167:8101/wordpress/oracle-mysql-and-berkeley-db/' rel='external nofollow' class='url'>Derrick&#8217;s Technology Playground &raquo; Blog Archive &raquo; Oracle, MySQL and Berkeley DB</a></span>
				<span class="date">22.05.09 / 2am</span>
			</cite>
			<div class="content">
								<p>[...]  Tokyo Cabinet is now the new black. [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-195296">
			<cite>
								<span class="author"><a href='http://dh.squidcode.com' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/5ff9b580a36b96e39c3da45ac722a08f?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://dh.squidcode.com' rel='external nofollow'>dH</a></span>
				<span class="date">25.05.09 / 11am</span>
			</cite>
			<div class="content">
								<p>An initial version of the native PHP library for Tokyo Tyrant is available here: <a href="http://code.google.com/p/phptyrant" rel="nofollow">phptyrant client</a>.</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-195986">
			<cite>
								<span class="author"><a href='http://www.dugthawts.com/?p=460' rel='external nofollow' class='url'>A Drop In The Stream &rsaquo; links for 2009-05-28</a></span>
				<span class="date">29.05.09 / 12am</span>
			</cite>
			<div class="content">
								<p>[...] Tokyo Cabinet: Beyond Key-Value Store - igvita.com Interesting persistence approach. (tags: database ruby architecture programming performance data development db storage tokyocabinet)     This was written by doug. Posted on Thursday, May 28, 2009, at 9:07 pm. Filed under del.icio.us Links. Bookmark the permalink. Follow comments here with the RSS feed. Post a comment or leave a trackback. [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-201860">
			<cite>
								<span class="author"><a href='http://elisehuard.wordpress.com/2009/07/01/tokyo-cabinet-plugin-for-rails/' rel='external nofollow' class='url'>Tokyo Cabinet plugin for Rails &laquo; Jabberwocky</a></span>
				<span class="date">01.07.09 / 5pm</span>
			</cite>
			<div class="content">
								<p>[...] got to know it through this post of Ilya Grigorik where he basically says it&#8217;s blazingly fast. And when he says it&#8217;s fast, I tend to [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-203107">
			<cite>
								<span class="author"><a href='http://conceptspace.wikidot.com/blog:41' rel='external nofollow' class='url'>ConceptSpace: Tokyo Cabinet, Tokyo Tyrant and Rufus Tokyo in Ubuntu from Github</a></span>
				<span class="date">08.07.09 / 12pm</span>
			</cite>
			<div class="content">
								<p>[...] reading the performance of Tokyo Cabinet, it was necessary to try it. It&#8217;s easy to install it and try it in [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-204254">
			<cite>
								<span class="author"><a href='http://www.igvita.com/2009/07/13/extending-tokyo-cabinet-db-with-lua/' rel='external nofollow' class='url'>Extending Tokyo Cabinet DB with Lua - igvita.com</a></span>
				<span class="date">13.07.09 / 12pm</span>
			</cite>
			<div class="content">
								<p>[...] Cabinet is a trove of hidden of gems, the more you learn about it, the more you will appreciate the design and technical decisions [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-206748">
			<cite>
								<span class="author"><a href='http://amygdala.wordpress.com/2009/07/25/links-for-2009-07-24/' rel='external nofollow' class='url'>links for 2009-07-24 &laquo; Amy G. Dala</a></span>
				<span class="date">24.07.09 / 10am</span>
			</cite>
			<div class="content">
								<p>[...] Tokyo Cabinet: Beyond Key-Value Store &#8211; igvita.com (tags: databases) [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-207375">
			<cite>
								<span class="author"><a href='http://blog.fortiusone.com/2009/07/27/the-future-of-ruby-is-bright/' rel='external nofollow' class='url'>The Future of Ruby is Bright | Off the Map - Official Blog of FortiusOne</a></span>
				<span class="date">27.07.09 / 2pm</span>
			</cite>
			<div class="content">
								<p>[...] large and small is increasingly challenged. Ilya Grigorik introduced us to the fascinating world of Tokyo Cabinet, a database that eschews many traditional constraints and provides a wealth minimalist data [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-208084">
			<cite>
								<span class="author"><a href='http://tech-monkey.info/2009/07/31/four-short-links-31-july-2009/' rel='external nofollow' class='url'>Four short links: 31 July 2009 | Tech-monkey.info Blogs</a></span>
				<span class="date">31.07.09 / 7am</span>
			</cite>
			<div class="content">
								<p>[...] Tokyo Cabinet: Beyond Key-Value Store &#8212; description of Tokyo Cabinet and code examples in Ruby. More on the nosql move to leave relational databases behind for certain modern problems (such as scaling). [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-208125">
			<cite>
								<span class="author"><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/b0db2a581e0a2644fc0869464731a932?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/>coder</span>
				<span class="date">31.07.09 / 2pm</span>
			</cite>
			<div class="content">
								<p>There is also Schemafree</p>
<p><a href="http://code.google.com/p/schemafree/" rel="nofollow">http://code.google.com/p/schemafree/</a></p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-208398">
			<cite>
								<span class="author"><a href='http://parmi.it' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/473573dbec97a074cf0edd7635cdcdef?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://parmi.it' rel='external nofollow'>tejo</a></span>
				<span class="date">04.08.09 / 10am</span>
			</cite>
			<div class="content">
								<p>Hi Ilya, great writeup as usual</p>
<p>Lately I am trying to put some nested data in a tokyo table structure, such as:<br />
t['pk4'] = { &#8216;name&#8217; =&gt; &#8216;ephrem&#8217;, &#8216;age&#8217; =&gt; &#8216;32&#8242; , &#8216;colors&#8217;=&gt; %w(red white)}</p>
<p>but seems that I can&#8217;t&#8230;any ideas?</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-208399">
			<cite>
								<span class="author"><a href='http://jmettraux.wordpress.com' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/8d96626e52beb1ff90f57a8e189e1e6f?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://jmettraux.wordpress.com' rel='external nofollow'>John</a></span>
				<span class="date">04.08.09 / 10am</span>
			</cite>
			<div class="content">
								<p>@tejo</p>
<p>The TC/TT tables are limited to { k =&gt; v } hashes where keys and values are strings. If you want to store more structured data, try encoding the values as YAML or using Marshal.dump. </p>
<p>Cheers,</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-208401">
			<cite>
								<span class="author"><a href='http://parmi.it' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/473573dbec97a074cf0edd7635cdcdef?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://parmi.it' rel='external nofollow'>tejo</a></span>
				<span class="date">04.08.09 / 10am</span>
			</cite>
			<div class="content">
								<p>@John </p>
<p>Thank you John,  also for your blog posts!</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-209961">
			<cite>
								<span class="author"><a href='http://www.markalanevans.com/2009/08/23/key-value-pair-database-fast-full-text-searches/' rel='external nofollow' class='url'>Key Value Pair Database: Fast Full Text Searches &laquo; Mark Evans - Web Consultant</a></span>
				<span class="date">23.08.09 / 4pm</span>
			</cite>
			<div class="content">
								<p>[...] <a href="http://www.igvita.com/2009/02/13/tokyo-cabinet-beyond-key-value-store/" rel="nofollow">http://www.igvita.com/2009/02/13/tokyo-cabinet-beyond-key-value-store/</a> [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-210608">
			<cite>
								<span class="author"><a href='http://blog.dotkam.com/2009/08/30/key-value-store-list/' rel='external nofollow' class='url'>Key Value Store List</a></span>
				<span class="date">30.08.09 / 3am</span>
			</cite>
			<div class="content">
								<p>[...] good intro: Tokyo Cabinet Beyond Key Value Store [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-212782">
			<cite>
								<span class="author"><a href='http://taukon.de/2009/tokyo-tyrant-php-ein-key-value-store/' rel='external nofollow' class='url'>&raquo; Tokyo Tyrant PHP, ein Key Value Store taukon.de &#8211; PHP und anderer nonsens &raquo; Blog Archive</a></span>
				<span class="date">14.09.09 / 1pm</span>
			</cite>
			<div class="content">
								<p>[...] Mehr Details: <a href="http://www.igvita.com/2009/02/13/tokyo-cabinet-beyond-key-value-store/" rel="nofollow">http://www.igvita.com/2009/02/13/tokyo-cabinet-beyond-key-value-store/</a> [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-217454">
			<cite>
								<span class="author"><a href='http://blog.sociomantic.com/2009/09/hello-world/' rel='external nofollow' class='url'>Key/value storage engines &laquo; sociomantic labs</a></span>
				<span class="date">29.09.09 / 10am</span>
			</cite>
			<div class="content">
								<p>[...] <a href="http://www.igvita.com/2009/02/13/tokyo-cabinet-beyond-key-value-store/" rel="nofollow">http://www.igvita.com/2009/02/13/tokyo-cabinet-beyond-key-value-store/</a> [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-217709">
			<cite>
								<span class="author"><a href='http://blogs.citytechinc.com/sjohnson/?p=89' rel='external nofollow' class='url'>Shane K Johnson &raquo; Blog Archive &raquo; How I learned to say &#8216;No&#8217; to SQL</a></span>
				<span class="date">30.09.09 / 10am</span>
			</cite>
			<div class="content">
								<p>[...] blog post provides additional information with respect to Tokyo Cabinet/Tyrant. And here is the [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-252456">
			<cite>
								<span class="author"><a href='http://www.perfectmarket.com' rel='external nofollow'><img style='border:1px solid #BFBFBF; float:right; margin-left:10px;' src='http://www.gravatar.com/avatar/43d00c0da0cdbb6b299484d5d2bb9c31?rating=X&amp;default=http://www.igvita.com/wp-content/themes/igvita/images/gravatar.png' alt='No Gravatar' width=50 height=50/></a><a href='http://www.perfectmarket.com' rel='external nofollow'>Jun</a></span>
				<span class="date">07.11.10 / 8pm</span>
			</cite>
			<div class="content">
								<p>Base on my test, Tokyo Cabinet does not work well on large data sets but for small data sets it is extremely fast.  Here is the post <a href="http://bit.ly/aH7h3L" rel="nofollow">http://bit.ly/aH7h3L</a></p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-253608">
			<cite>
								<span class="author"><a href='http://measureonce.wordpress.com/2010/11/16/nosql-bag-of-links/' rel='external nofollow' class='url'>NoSQL Bag of Links &laquo; Measure Once, Cut Twice</a></span>
				<span class="date">16.11.10 / 1pm</span>
			</cite>
			<div class="content">
								<p>[...] Tokyo Cabinet Ruby Example [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
			<li id="comment-258145">
			<cite>
								<span class="author"><a href='http://www.distream.org/?p=135' rel='external nofollow' class='url'>NoSQL</a></span>
				<span class="date">17.12.10 / 10am</span>
			</cite>
			<div class="content">
								<p>[...] 02/09 东京Cabinet: 键值存储之外 &#8220;Tokyo Cabinet: Beyond Key-Values Store&#8221; 原文 [...]</p>
			</div>
			<div class="clear"></div>
		</li>


	
	
	</ol>

 


		<div id="comment-form">
				<h3 class="formhead">Have your say</h3>
				<p><small><strong>XHTML:</strong> You can use these tags: &lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </small></p>
								<form action="http://www.igvita.com/wp-comments-post.php" method="post" id="commentform">
								
				<input type="text" name="author" id="author" value="" class="textfield" tabindex="1" /><label class="text">Name (required)</label><br />
				<input type="text" name="email" id="email" value="" class="textfield" tabindex="2" /><label class="text">Email (required)</label><br />
				<input type="text" name="url" id="url" value="" class="textfield" tabindex="3" /><label class="text">Website</label><br />
				
								
				<textarea name="comment" id="comment" class="commentbox" tabindex="4"></textarea>
				<div class="formactions">
					

	<p style="clear: both;" class="subscribe-to-comments">
	<input type="checkbox" name="subscribe" id="subscribe" value="subscribe" style="width: auto;" />
	<label for="subscribe">Notify me of follow up comments via e-mail</label>
	</p>


					<span style="visibility:hidden">Safari hates me</span>
					<input type="submit" name="submit" tabindex="5" class="submit" value="Add your comment" />
				</div>
				<input type="hidden" name="comment_post_ID" value="206" />
								</form>
			</div>


			
					</div>
	</div>
<hr class="hide" />

	<div id="ancillary">
		<div class="inside">
			<div class="block first">
				<a href="http://www.twitter.com/igrigorik" title="Follow me on Twitter"><img src="/wp-content/themes/igvita/images/twitter_logo.gif" style="float:right;" /></a>
<h2>Twitter Updates</h2>
<div style="margin-top:-0.5em;" class="twitter">

	<div id="twitter_div">
		<ul id="twitter_update_list"></ul>
	</div>
	<script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
	<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/igrigorik.json?callback=twitterCallback2&count=5"></script>
	<span class="read-on"><a href="http://www.twitter.com/igrigorik">follow igrigorik</a></span>
</div>
			</div>
			
			<div class="block">
				<h2>Recently</h2>
<ul class="dates">
			<li><a href="http://www.igvita.com/2010/12/14/beyond-ruby-mirah-reia-rite/"><span class="date">14.12</span> Beyond Ruby: Mirah, Reia, Rite </a></li>
		<li><a href="http://www.igvita.com/2010/12/02/concurrency-with-actors-goroutines-ruby/"><span class="date">02.12</span> Concurrency with Actors, Goroutines &#038; Ruby </a></li>
		<li><a href="http://www.igvita.com/2010/11/17/routing-with-ruby-zeromq-devices/"><span class="date">17.11</span> Routing with Ruby &#038; ZeroMQ Devices </a></li>
		<li><a href="http://www.igvita.com/2010/10/22/open-source-search-with-lucene-solr/"><span class="date">22.10</span> Open Source Search with Lucene &#038; Solr </a></li>
		<li><a href="http://www.igvita.com/2010/10/05/case-for-smartphone-web-activity-feeds/"><span class="date">05.10</span> Case for Smartphone Web Activity Feeds </a></li>
		<li><a href="http://www.igvita.com/2010/09/03/zeromq-modern-fast-networking-stack/"><span class="date">03.09</span> ZeroMQ: Modern &#038; Fast Networking Stack </a></li>
		<li><a href="http://www.igvita.com/2010/08/18/multi-core-threads-message-passing/"><span class="date">18.08</span> Multi-core, Threads &#038; Message Passing </a></li>
		<li><a href="http://www.igvita.com/2010/08/04/rails-3-internals-railtie-creating-plugins/"><span class="date">04.08</span> Rails 3 Internals: Railtie &#038; Creating Plugins </a></li>
		<li><a href="http://www.igvita.com/2010/07/19/speed-tracer-server-side-tracing-with-rack/"><span class="date">19.07</span> Speed Tracer Server-side Tracing with Rack </a></li>
		<li><a href="http://www.igvita.com/2010/06/24/weak-consistency-and-cap-implications/"><span class="date">24.06</span> Weak Consistency and CAP Implications </a></li>
		<li><a href="http://www.igvita.com/2010/06/07/rails-performance-needs-an-overhaul/"><span class="date">07.06</span> Rails Performance Needs an Overhaul </a></li>
		<li><a href="http://www.igvita.com/2010/05/20/scalable-work-queues-with-beanstalk/"><span class="date">20.05</span> Scalable Work Queues with Beanstalk </a></li>
	</ul>
			</div>
			
			<div class="block">
				<h2> Amazon Review </h2>

<div class="amazon">

	
		<a href="http://www.amazon.com/exec/obidos/ASIN/0684865246/igvitacom-20?tag=igvitacom-20">
			<img class="cover" src="http://ecx.images-amazon.com/images/I/51QkkgkZ9YL.jpg" width="59" height="90" alt="Euclid's Window " />
		</a>

		<p><a href="http://www.amazon.com/exec/obidos/ASIN/0684865246/igvitacom-20?tag=igvitacom-20">Euclid's Window </a> <span class="separator">by</span> <span class="author">Leonard Mlodinow</span></p>

		<p><img src="/wp-content/themes/igvita/images/stars/stars-5-0.gif" valign="middle" />
			&nbsp; &nbsp; <span class="date"> History of geometry</span><br />
			December 5, 2010		</p>

		<span class="read-on"><a href="http://www.amazon.com/gp/cdp/member-reviews/A2MGUNKW1ANLT5">read review</a></span>


	
</div>


<h2>My <span class="flickrblue">Flick</span><span class="flickrpink">r</span> Photos</h2>

	<div class="flickr">	
		<a href="http://www.flickr.com/photos/ig/5175692732/" title="House of Voodoo - New Orleans"><img src="http://farm5.static.flickr.com/4084/5175692732_f252591880_s.jpg" alt="House of Voodoo - New Orleans" /></a><a href="http://www.flickr.com/photos/ig/5175670076/" title="Bourbon Street - New Orleans"><img src="http://farm5.static.flickr.com/4113/5175670076_72da19449a_s.jpg" alt="Bourbon Street - New Orleans" /></a><a href="http://www.flickr.com/photos/ig/5111287246/" title="Chicago Downtown"><img src="http://farm2.static.flickr.com/1418/5111287246_8dbf47031a_s.jpg" alt="Chicago Downtown" /></a><a href="http://www.flickr.com/photos/ig/5111286974/" title="Chicago Downtown"><img src="http://farm5.static.flickr.com/4088/5111286974_0a8ccde0ee_s.jpg" alt="Chicago Downtown" /></a><a href="http://www.flickr.com/photos/ig/5110683535/" title="Underworld of Chicago "><img src="http://farm5.static.flickr.com/4087/5110683535_24b3e0e181_s.jpg" alt="Underworld of Chicago " /></a><a href="http://www.flickr.com/photos/ig/5090028966/" title="Boston Harbor Sunset"><img src="http://farm5.static.flickr.com/4108/5090028966_b1096211ca_s.jpg" alt="Boston Harbor Sunset" /></a>				
		<span class="read-on"><a href="http://flickr.com/photos/ig/">view gallery</a></span>
</div>	

			</div>
			
			<div class="clear"></div>
		</div>
	</div>
	<!-- [END] #ancillary -->	

<hr class="hide" />
	<div id="footer">
		<div class="inside">
			
			<p class="copyright"><a href="http://wordpress.org"><img src="/wp-content/themes/igvita/images/wordpress.gif" alt="wordpress" valign="middle" /></a> &nbsp;&nbsp;Copyright &copy; 2005-2011 Ilya Grigorik</p>
			<p class="attributes"><a href="http://www.igvita.com/feed/" onClick="pageTracker._trackEvent('RSS', 'Subscribe', 'footer');"><img src="/wp-content/themes/igvita/images/rss.gif" style="vertical-align:middle;"/>&nbsp; Entries RSS</a> <a href="http://www.igvita.com/comments/feed/"><img src="/wp-content/themes/igvita/images/rss.gif" style="vertical-align:middle;"/>&nbsp; Comments RSS</a></p>
		</div>
	</div>
	<!-- [END] #footer -->	

	<!-- 46 queries. 1.821 seconds. -->
	<!-- ClickTale Bottom part -->
<div id="ClickTaleDiv" style="display: none;"></div>
<script type="text/javascript">
if(document.location.protocol!='https:')
  document.write(unescape("%3Cscript%20src='http://s.clicktale.net/WRb6.js'%20type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
if(typeof ClickTale=='function') ClickTale(6746,0.045,"www03");
</script>
<!-- ClickTale end of Bottom part -->

			<script type="text/javascript">
			/*<![CDATA[*//*---->*/
			inputs = document.getElementsByTagName("input");
			for (var i in inputs) {
				if (typeof(inputs[i].value) != 'unknown' && inputs[i].value != null && (inputs[i].type == "button" || inputs[i].type == "submit") && inputs[i].value.search(/^Search$/) != -1) {
					var oElement = inputs[i];
					function fn(e) { ClickTaleTag("Search"); }
					YAHOO.util.Event.addListener(oElement, "click", fn);  
				}
			} 
			/*--*//*]]>*/
			</script>
			
			<script type="text/javascript">
			/*<![CDATA[*//*---->*/
			for (var i in document.forms) {
				if (typeof(document.forms[i].action) != 'unknown' && document.forms[i].action != null && document.forms[i].action.search(/\/wp-comments-post\.php$/) != -1) { 
					var oElement = document.forms[i];
					function fn(e) { ClickTaleTag("Comment");}
					YAHOO.util.Event.addListener(oElement, "submit", fn);  
				}
			}
			/*--*//*]]>*/
			</script>
			
			<script type="text/javascript">
			/*<![CDATA[*//*---->*/
			for (var i in document.links) {
				if (typeof(document.links[i].href) != 'unknown' && document.links[i].href != null && document.links[i].href.search(/(feed=rss2$)|(feed$)|(feed\/$)/) != -1) {
					var oElement = document.links[i];
					function fn(e) { ClickTaleTag("RSS"); }
					YAHOO.util.Event.addListener(oElement, "click", fn);  
				}
			} 
			/*--*//*]]>*/
			</script>
			
			<script type="text/javascript">
			/*<![CDATA[*//*---->*/
			for (var i in document.links) {
				if (typeof(document.links[i].href) != 'unknown' && document.links[i].href != null && document.links[i].href.search(/(feed=comments-rss2$)|(comments\/feed$)|(comments\/feed\/$)/) != -1) {
					var oElement = document.links[i];
					function fn(e) { ClickTaleTag("Comments-RSS"); }
					YAHOO.util.Event.addListener(oElement, "click", fn);  
				}
			} 
			/*--*//*]]>*/
			</script>
			
			<script type="text/javascript">
			/*<![CDATA[*//*---->*/
			for (var i in document.links) {
				if (typeof(document.links[i].href) != 'unknown' && document.links[i].href != null && document.links[i].href.search(/(feed=rss2$)|(feed$)|(feed\/$)/) != -1) {
					var oElement = document.links[i];
					function fn(e) { ClickTaleTag("RSS-Rightclick"); }
					YAHOO.util.Event.addListener(oElement, "contextmenu", fn);  
				}
			} 
			/*--*//*]]>*/
			</script>
			
			<script type="text/javascript">
			/*<![CDATA[*//*---->*/
			for (var i in document.links) {
				if (typeof(document.links[i].href) != 'unknown' && document.links[i].href != null && document.links[i].href.search(/(feed=comments-rss2$)|(comments\/feed$)|(comments\/feed\/$)/) != -1) {
					var oElement = document.links[i];
					function fn(e) { ClickTaleTag("Comments-RSS-Rightclick"); }
					YAHOO.util.Event.addListener(oElement, "contextmenu", fn);  
				}
			} 
			/*--*//*]]>*/
			</script>
			
<!-- Start Quantcast tag -->
<script type="text/javascript">
_qoptions={
qacct:"p-1eZUZ-mfpiyU2"
};
</script>
<script type="text/javascript" src="http://edge.quantserve.com/quant.js"></script>
<noscript>
<img src="http://pixel.quantserve.com/pixel/p-1eZUZ-mfpiyU2.gif" style="display: none;" border="0" height="1" width="1" alt="Quantcast"/>
</noscript>
<!-- End Quantcast tag -->

<!-- Reinvigorate -->
<script type="text/javascript" src="http://include.reinvigorate.net/re_.js"></script>
<script type="text/javascript">
  try { reinvigorate.track("1k7q7-i0d7gsq187"); } catch(err) {}
</script>

</body>
</html>

